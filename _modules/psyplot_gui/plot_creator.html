<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>psyplot_gui.plot_creator &mdash; psyplot-gui  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/nc-table-styles.css?v=d585f46f" />
      <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            psyplot-gui
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#how-to-install">How to install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installing.html#installation-using-conda">Installation using conda</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../installing.html#installation-using-pip">Installation using pip</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../installing.html#dependencies">Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installing.html#required-dependencies">Required dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#starting-the-gui">Starting the GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#the-console">The Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#the-help-explorer">The Help Explorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#the-plot-creator">The Plot Creator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#the-project-content">The Project content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#the-formatoptions-widget">The formatoptions widget</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration of the GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command line usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../command_line.html#positional-arguments">Positional Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../command_line.html#named-arguments">Named Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../command_line.html#info-options">Info options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../command_line.html#output-options">Output options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../command_line.html#gui-options">Gui options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugin configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html#plugin-config">Plugin configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html#developing-plugins">Developing plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribution and development hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/psyplot_gui.html">psyplot_gui package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.ListGuiPluginsAction"><code class="docutils literal notranslate"><span class="pre">ListGuiPluginsAction</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.UNIT_TESTING"><code class="docutils literal notranslate"><span class="pre">UNIT_TESTING</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.get_parser"><code class="docutils literal notranslate"><span class="pre">get_parser()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.get_versions"><code class="docutils literal notranslate"><span class="pre">get_versions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.send_files_to_psyplot"><code class="docutils literal notranslate"><span class="pre">send_files_to_psyplot()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#psyplot_gui.start_app"><code class="docutils literal notranslate"><span class="pre">start_app()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.compat.html">psyplot_gui.compat package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.config.html">psyplot_gui.config package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.sphinx_supp.html">psyplot_gui.sphinx_supp package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/psyplot_gui.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html"><code class="docutils literal notranslate"><span class="pre">FigureCanvas</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.FigureManager"><code class="docutils literal notranslate"><span class="pre">FigureManager</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.FigureWidget"><code class="docutils literal notranslate"><span class="pre">FigureWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.FiguresDock"><code class="docutils literal notranslate"><span class="pre">FiguresDock</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.PsyplotCanvas"><code class="docutils literal notranslate"><span class="pre">PsyplotCanvas</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.PsyplotCanvasManager"><code class="docutils literal notranslate"><span class="pre">PsyplotCanvasManager</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.new_figure_manager"><code class="docutils literal notranslate"><span class="pre">new_figure_manager()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.backend.html#psyplot_gui.backend.new_figure_manager_given_figure"><code class="docutils literal notranslate"><span class="pre">new_figure_manager_given_figure()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html"><code class="docutils literal notranslate"><span class="pre">DockMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.ListValidator"><code class="docutils literal notranslate"><span class="pre">ListValidator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.LoadFromConsoleButton"><code class="docutils literal notranslate"><span class="pre">LoadFromConsoleButton</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.PyErrorMessage"><code class="docutils literal notranslate"><span class="pre">PyErrorMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.StreamToLogger"><code class="docutils literal notranslate"><span class="pre">StreamToLogger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.get_icon"><code class="docutils literal notranslate"><span class="pre">get_icon()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.get_module_path"><code class="docutils literal notranslate"><span class="pre">get_module_path()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.common.html#psyplot_gui.common.is_running_tests"><code class="docutils literal notranslate"><span class="pre">is_running_tests()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.console.html"><code class="docutils literal notranslate"><span class="pre">ConsoleWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.console.html#psyplot_gui.console.IPythonControl"><code class="docutils literal notranslate"><span class="pre">IPythonControl</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.console.html#psyplot_gui.console.init_asyncio_patch"><code class="docutils literal notranslate"><span class="pre">init_asyncio_patch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html"><code class="docutils literal notranslate"><span class="pre">ArrayItem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.DatasetTree"><code class="docutils literal notranslate"><span class="pre">DatasetTree</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.DatasetTreeItem"><code class="docutils literal notranslate"><span class="pre">DatasetTreeItem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.FiguresTree"><code class="docutils literal notranslate"><span class="pre">FiguresTree</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.FiguresTreeItem"><code class="docutils literal notranslate"><span class="pre">FiguresTreeItem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.PlotterList"><code class="docutils literal notranslate"><span class="pre">PlotterList</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.ProjectContent"><code class="docutils literal notranslate"><span class="pre">ProjectContent</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.ProjectContentWidget"><code class="docutils literal notranslate"><span class="pre">ProjectContentWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.SelectAllButton"><code class="docutils literal notranslate"><span class="pre">SelectAllButton</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.SelectNoneButton"><code class="docutils literal notranslate"><span class="pre">SelectNoneButton</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.content_widget.html#psyplot_gui.content_widget.escape_html"><code class="docutils literal notranslate"><span class="pre">escape_html()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html"><code class="docutils literal notranslate"><span class="pre">DataFrameDock</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html#psyplot_gui.dataframeeditor.DataFrameEditor"><code class="docutils literal notranslate"><span class="pre">DataFrameEditor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html#psyplot_gui.dataframeeditor.DataFrameModel"><code class="docutils literal notranslate"><span class="pre">DataFrameModel</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html#psyplot_gui.dataframeeditor.DataFrameView"><code class="docutils literal notranslate"><span class="pre">DataFrameView</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html#psyplot_gui.dataframeeditor.FrozenTableView"><code class="docutils literal notranslate"><span class="pre">FrozenTableView</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dataframeeditor.html#psyplot_gui.dataframeeditor.bool_false_check"><code class="docutils literal notranslate"><span class="pre">bool_false_check()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dependencies.html"><code class="docutils literal notranslate"><span class="pre">DependenciesDialog</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.dependencies.html#psyplot_gui.dependencies.DependenciesTree"><code class="docutils literal notranslate"><span class="pre">DependenciesTree</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.fmt_widget.html"><code class="docutils literal notranslate"><span class="pre">DimensionsWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.fmt_widget.html#psyplot_gui.fmt_widget.FormatoptionWidget"><code class="docutils literal notranslate"><span class="pre">FormatoptionWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html"><code class="docutils literal notranslate"><span class="pre">HelpExplorer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin"><code class="docutils literal notranslate"><span class="pre">HelpMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.SphinxThread"><code class="docutils literal notranslate"><span class="pre">SphinxThread</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.TextHelp"><code class="docutils literal notranslate"><span class="pre">TextHelp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser"><code class="docutils literal notranslate"><span class="pre">UrlBrowser</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlCombo"><code class="docutils literal notranslate"><span class="pre">UrlCombo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp"><code class="docutils literal notranslate"><span class="pre">UrlHelp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.file2html"><code class="docutils literal notranslate"><span class="pre">file2html()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.html2file"><code class="docutils literal notranslate"><span class="pre">html2file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.main.html"><code class="docutils literal notranslate"><span class="pre">MainWindow</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.main.html#psyplot_gui.main.mainwindow"><code class="docutils literal notranslate"><span class="pre">mainwindow</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html"><code class="docutils literal notranslate"><span class="pre">ArrayNameItemDelegate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameValidator"><code class="docutils literal notranslate"><span class="pre">ArrayNameValidator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable"><code class="docutils literal notranslate"><span class="pre">ArrayTable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreator"><code class="docutils literal notranslate"><span class="pre">AxesCreator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreatorCollection"><code class="docutils literal notranslate"><span class="pre">AxesCreatorCollection</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector"><code class="docutils literal notranslate"><span class="pre">AxesSelector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesViewer"><code class="docutils literal notranslate"><span class="pre">AxesViewer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox"><code class="docutils literal notranslate"><span class="pre">CoordComboBox</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordsTable"><code class="docutils literal notranslate"><span class="pre">CoordsTable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable"><code class="docutils literal notranslate"><span class="pre">DragDropTable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator"><code class="docutils literal notranslate"><span class="pre">PlotCreator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator"><code class="docutils literal notranslate"><span class="pre">SubplotCreator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariableItemDelegate"><code class="docutils literal notranslate"><span class="pre">VariableItemDelegate</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariablesTable"><code class="docutils literal notranslate"><span class="pre">VariablesTable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html"><code class="docutils literal notranslate"><span class="pre">ConfigPage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html#psyplot_gui.preferences.GuiRcParamsWidget"><code class="docutils literal notranslate"><span class="pre">GuiRcParamsWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html#psyplot_gui.preferences.Prefences"><code class="docutils literal notranslate"><span class="pre">Prefences</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html#psyplot_gui.preferences.PsyRcParamsWidget"><code class="docutils literal notranslate"><span class="pre">PsyRcParamsWidget</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html#psyplot_gui.preferences.RcParamsTree"><code class="docutils literal notranslate"><span class="pre">RcParamsTree</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/psyplot_gui.preferences.html#psyplot_gui.preferences.RcParamsWidget"><code class="docutils literal notranslate"><span class="pre">RcParamsWidget</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-5-0">v1.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#fixed">Fixed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#added">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-4-0">v1.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id2">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id3">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-3-0">v1.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id4">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id5">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-2-4">v1.2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-2-3">v1.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-2-2">v1.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id6">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id7">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-2-1">v1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-2-0">v1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id8">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-1-0">v1.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id9">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v1-0-1">v1.0.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id10">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog.html#id11">Changed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../todos.html">ToDos</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">psyplot-gui</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../psyplot_gui.html">psyplot_gui</a></li>
      <li class="breadcrumb-item active">psyplot_gui.plot_creator</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for psyplot_gui.plot_creator</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;This module contains a widget to create new plots with psyplot</span>

<span class="sd">The main class is the :class:`PlotCreator` which is used to handle the</span>
<span class="sd">different plotting methods of the :class:`psyplot.project.ProjectPlotter`</span>
<span class="sd">class&quot;&quot;&quot;</span>

<span class="c1"># SPDX-FileCopyrightText: 2016-2024 University of Lausanne</span>
<span class="c1"># SPDX-FileCopyrightText: 2020-2021 Helmholtz-Zentrum Geesthacht</span>
<span class="c1"># SPDX-FileCopyrightText: 2021-2024 Helmholtz-Zentrum hereon GmbH</span>
<span class="c1">#</span>
<span class="c1"># SPDX-License-Identifier: LGPL-3.0-only</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">starmap</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">psyplot.project</span> <span class="k">as</span> <span class="nn">psy</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">xarray</span>
<span class="kn">from</span> <span class="nn">psyplot.config.rcsetup</span> <span class="kn">import</span> <span class="n">get_configdir</span>
<span class="kn">from</span> <span class="nn">psyplot.utils</span> <span class="kn">import</span> <span class="n">_temp_bool_prop</span>

<span class="kn">from</span> <span class="nn">psyplot_gui.common</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ListValidator</span><span class="p">,</span>
    <span class="n">LoadFromConsoleButton</span><span class="p">,</span>
    <span class="n">PyErrorMessage</span><span class="p">,</span>
    <span class="n">get_icon</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.compat.qtcompat</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QAbstractItemView</span><span class="p">,</span>
    <span class="n">QAction</span><span class="p">,</span>
    <span class="n">QCheckBox</span><span class="p">,</span>
    <span class="n">QComboBox</span><span class="p">,</span>
    <span class="n">QDialog</span><span class="p">,</span>
    <span class="n">QDialogButtonBox</span><span class="p">,</span>
    <span class="n">QDoubleValidator</span><span class="p">,</span>
    <span class="n">QFileDialog</span><span class="p">,</span>
    <span class="n">QGraphicsRectItem</span><span class="p">,</span>
    <span class="n">QGraphicsScene</span><span class="p">,</span>
    <span class="n">QGraphicsView</span><span class="p">,</span>
    <span class="n">QGridLayout</span><span class="p">,</span>
    <span class="n">QHBoxLayout</span><span class="p">,</span>
    <span class="n">QIcon</span><span class="p">,</span>
    <span class="n">QIntValidator</span><span class="p">,</span>
    <span class="n">QLabel</span><span class="p">,</span>
    <span class="n">QLineEdit</span><span class="p">,</span>
    <span class="n">QListView</span><span class="p">,</span>
    <span class="n">QMenu</span><span class="p">,</span>
    <span class="n">QPushButton</span><span class="p">,</span>
    <span class="n">QSplitter</span><span class="p">,</span>
    <span class="n">QStyledItemDelegate</span><span class="p">,</span>
    <span class="n">Qt</span><span class="p">,</span>
    <span class="n">QTableWidget</span><span class="p">,</span>
    <span class="n">QTableWidgetItem</span><span class="p">,</span>
    <span class="n">QTabWidget</span><span class="p">,</span>
    <span class="n">QtCore</span><span class="p">,</span>
    <span class="n">QToolButton</span><span class="p">,</span>
    <span class="n">QValidator</span><span class="p">,</span>
    <span class="n">QVBoxLayout</span><span class="p">,</span>
    <span class="n">QWidget</span><span class="p">,</span>
    <span class="n">asstring</span><span class="p">,</span>
    <span class="n">isstring</span><span class="p">,</span>
    <span class="n">with_qt5</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.preferences</span> <span class="kn">import</span> <span class="n">RcParamsTree</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="CoordComboBox">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox">[docs]</a>
<span class="k">class</span> <span class="nc">CoordComboBox</span><span class="p">(</span><span class="n">QComboBox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combobox showing coordinate information of a dataset</span>

<span class="sd">    This combobox loads its data from the current dataset and allows the</span>
<span class="sd">    popups to be left open. It also has a :attr:`leftclick` signal that is</span>
<span class="sd">    emitted when the popup is about to be closed because the user clicked on a</span>
<span class="sd">    value&quot;&quot;&quot;</span>

    <span class="n">close_popups</span> <span class="o">=</span> <span class="n">_temp_bool_prop</span><span class="p">(</span><span class="s2">&quot;close_popups&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">use_coords</span> <span class="o">=</span> <span class="n">_temp_bool_prop</span><span class="p">(</span><span class="s2">&quot;use_coords&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">leftclick</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QComboBox</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds_func</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ds_func: function</span>
<span class="sd">            The function that, when called without arguments, returns the</span>
<span class="sd">            xarray.Dataset to use</span>
<span class="sd">        dim: str</span>
<span class="sd">            The coordinate name for this combobox</span>
<span class="sd">        parent: PyQt5.QtWidgets.QWidget</span>
<span class="sd">            The parent widget&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoordComboBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">dim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_empty</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span> <span class="o">=</span> <span class="n">ds_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_clicked</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># modify the view</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>
        <span class="c1"># We allow the selection of multiple items with a left-click</span>
        <span class="n">view</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QListView</span><span class="o">.</span><span class="n">ExtendedSelection</span><span class="p">)</span>
        <span class="c1"># The following modifications will cause this behaviour:</span>
        <span class="c1">#     Left-click:</span>
        <span class="c1">#         Case 1: Any of the already existing plot arrays is selected</span>
        <span class="c1">#             Add the selected values in the popup to the dimension in</span>
        <span class="c1">#             the currently selected plot items</span>
        <span class="c1">#         Case 2: No plot arrays are selected or none exists</span>
        <span class="c1">#             Create new plot items from the selection in the popup</span>
        <span class="c1">#     Right-Click:</span>
        <span class="c1">#         Set the currentIndex which will be used when new plot items</span>
        <span class="c1">#         are created</span>
        <span class="c1">#</span>
        <span class="c1"># Therefore we first enable a CustomContextMenu</span>
        <span class="n">view</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CustomContextMenu</span><span class="p">)</span>

        <span class="c1"># We have to disable the default MousePressEvent in the views viewport</span>
        <span class="c1"># because otherwise the Left-click behaviour would occur as well when</span>
        <span class="c1"># hitting the right button</span>
        <span class="c1"># Therefore:</span>
        <span class="c1"># install an EventFilter such that only the customContextMenuRequested</span>
        <span class="c1"># signal of the view is fired and not the pressed signal (which would</span>
        <span class="c1"># hide the popup)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">customContextMenuRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right_click</span><span class="p">)</span>
        <span class="c1"># Furthermore we implement, that the pop up shall not be closed if the</span>
        <span class="c1"># keep open property is True. Therefore we have to track when the</span>
        <span class="c1"># index changes</span>
        <span class="n">view</span><span class="o">.</span><span class="n">pressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handleItemPressed</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hide_anyway</span><span class="p">)</span>

<div class="viewcode-block" id="CoordComboBox.eventFilter">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.eventFilter">[docs]</a>
    <span class="k">def</span> <span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to filter right-click events on the view()&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEvent</span><span class="o">.</span><span class="n">MouseButtonPress</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span>
        <span class="k">return</span> <span class="n">ret</span></div>


<div class="viewcode-block" id="CoordComboBox.handleItemPressed">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.handleItemPressed">[docs]</a>
    <span class="k">def</span> <span class="nf">handleItemPressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to be called when an item is pressed to make sure that</span>
<span class="sd">        we know whether anything changed before closing the popup&quot;&quot;&quot;</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">itemFromIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="CoordComboBox.right_click">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.right_click">[docs]</a>
    <span class="k">def</span> <span class="nf">right_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function that is called when an item is right_clicked&quot;&quot;&quot;</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">()</span><span class="o">.</span><span class="n">indexAt</span><span class="p">(</span><span class="n">point</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_clicked</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="CoordComboBox.hide_anyway">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.hide_anyway">[docs]</a>
    <span class="k">def</span> <span class="nf">hide_anyway</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to hide the popup despite of the :attr:`_changed` attribute&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidePopup</span><span class="p">()</span></div>


<div class="viewcode-block" id="CoordComboBox.hidePopup">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.hidePopup">[docs]</a>
    <span class="k">def</span> <span class="nf">hidePopup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to only close the popup when the :attr:`close_popup`</span>
<span class="sd">        attribute is True or it is clicked outside the window&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_clicked</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftclick</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_popups</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">CoordComboBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">hidePopup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_clicked</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="CoordComboBox.mousePressEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.mousePressEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to fill the box with content from the dataset&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_coord</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoordComboBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="CoordComboBox.mouseDoubleClickEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.mouseDoubleClickEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">mouseDoubleClickEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to fill the box with content from the dataset&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_coord</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoordComboBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mouseDoubleClickEvent</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="CoordComboBox.load_coord">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordComboBox.load_coord">[docs]</a>
    <span class="k">def</span> <span class="nf">load_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the coordinate data from the dataset and fill the combobox with</span>
<span class="sd">        it (if it is empty)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_empty</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_coords</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dim</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dim</span><span class="p">])))))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_empty</span> <span class="o">=</span> <span class="kc">False</span></div>
</div>



<div class="viewcode-block" id="ArrayNameValidator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameValidator">[docs]</a>
<span class="k">class</span> <span class="nc">ArrayNameValidator</span><span class="p">(</span><span class="n">QValidator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to make sure that only those arrays names are inserted that are</span>
<span class="sd">    not currently in the main project or the tree&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ArrayNameValidator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">current_names</span><span class="p">)</span>

<div class="viewcode-block" id="ArrayNameValidator.fixup">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameValidator.fixup">[docs]</a>
    <span class="k">def</span> <span class="nf">fixup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">next_available_name</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">next_available_name</span><span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="s2">&quot;_</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayNameValidator.validate">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameValidator.validate">[docs]</a>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">QValidator</span><span class="o">.</span><span class="n">Intermediate</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">pos</span>
        <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_text</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">gcp</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">arr_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_names</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">QValidator</span><span class="o">.</span><span class="n">Intermediate</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">pos</span>
        <span class="k">return</span> <span class="n">QValidator</span><span class="o">.</span><span class="n">Acceptable</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">pos</span></div>
</div>



<div class="viewcode-block" id="ArrayNameItemDelegate">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameItemDelegate">[docs]</a>
<span class="k">class</span> <span class="nc">ArrayNameItemDelegate</span><span class="p">(</span><span class="n">QStyledItemDelegate</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delegate using the :class:`ArrayNameValidator` for validation&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ArrayNameItemDelegate.createEditor">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayNameItemDelegate.createEditor">[docs]</a>
    <span class="k">def</span> <span class="nf">createEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="n">editor</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">())</span>
        <span class="n">validator</span> <span class="o">=</span> <span class="n">ArrayNameValidator</span><span class="p">(</span>
            <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="k">if</span> <span class="n">item</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">(),</span> <span class="n">editor</span>
        <span class="p">)</span>
        <span class="n">editor</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">validator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">editor</span></div>
</div>



<div class="viewcode-block" id="VariableItemDelegate">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariableItemDelegate">[docs]</a>
<span class="k">class</span> <span class="nc">VariableItemDelegate</span><span class="p">(</span><span class="n">QStyledItemDelegate</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delegate alowing only the variables in the parents dataset.</span>

<span class="sd">    The parent must hold a `get_ds` method that returns a dataset when called</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="VariableItemDelegate.createEditor">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariableItemDelegate.createEditor">[docs]</a>
    <span class="k">def</span> <span class="nf">createEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">isValid</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="n">editor</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="n">validator</span> <span class="o">=</span> <span class="n">ListValidator</span><span class="p">(</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="n">editor</span>
        <span class="p">)</span>
        <span class="n">editor</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">validator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">editor</span></div>
</div>



<div class="viewcode-block" id="VariablesTable">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariablesTable">[docs]</a>
<span class="k">class</span> <span class="nc">VariablesTable</span><span class="p">(</span><span class="n">QTableWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table to display the variables of a dataset&quot;&quot;&quot;</span>

    <span class="c1">#: The variables in the dataset</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selected_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently selected variables&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span>
                <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">asstring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">))</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                <span class="nb">sorted</span><span class="p">(</span>
                    <span class="nb">set</span><span class="p">(</span>
                        <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
                    <span class="p">)</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">get_func</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">,</span> <span class="s2">&quot;dims&quot;</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        get_func: function</span>
<span class="sd">            The function that, when called without arguments, returns the</span>
<span class="sd">            xarray.Dataset to use</span>
<span class="sd">        columns: list of str</span>
<span class="sd">            The attribute that will be used as columns for the variables&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">VariablesTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span> <span class="o">=</span> <span class="n">get_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_columns</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="VariablesTable.set_columns">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariablesTable.set_columns">[docs]</a>
    <span class="k">def</span> <span class="nf">set_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column_labels</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">columns</span><span class="p">)</span></div>


<div class="viewcode-block" id="VariablesTable.fill_from_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.VariablesTable.fill_from_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">fill_from_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the table and insert items from the given `dataset`&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_columns</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">vnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vnames</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">vname</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vnames</span><span class="p">):</span>
            <span class="n">variable</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">vname</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">asstring</span><span class="p">(</span><span class="n">vname</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column_labels</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s2">&quot;dims&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span>
                        <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">dims</span><span class="p">))</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span>
                        <span class="n">i</span><span class="p">,</span>
                        <span class="n">j</span><span class="p">,</span>
                        <span class="n">QTableWidgetItem</span><span class="p">(</span>
                            <span class="nb">str</span><span class="p">(</span>
                                <span class="n">variable</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                    <span class="n">attr</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
                        <span class="p">),</span>
                    <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="CoordsTable">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordsTable">[docs]</a>
<span class="k">class</span> <span class="nc">CoordsTable</span><span class="p">(</span><span class="n">QTableWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A table showing the coordinates of in a dataset via instances of</span>
<span class="sd">    :class:`CoordComboBox`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        get_func: function</span>
<span class="sd">            The function that, when called without arguments, returns the</span>
<span class="sd">            xarray.Dataset to use</span>
<span class="sd">        ``*args, **kwargs``</span>
<span class="sd">            Determined by the :class:`PyQt5.QtWidgets.QTableWidget` class&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoordsTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span> <span class="o">=</span> <span class="n">get_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">combo_boxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of :class:`CoordComboBox` in this table&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">filter</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cellWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columnCount</span><span class="p">())),</span>
            <span class="p">)</span>
        <span class="p">)</span>

<div class="viewcode-block" id="CoordsTable.fill_from_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordsTable.fill_from_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">fill_from_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the table and create new comboboxes&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="n">vnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dims</span> <span class="o">=</span> <span class="n">dims</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">vname</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span> <span class="k">for</span> <span class="n">vname</span> <span class="ow">in</span> <span class="n">vnames</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dims</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dim</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dims</span><span class="p">):</span>
            <span class="n">header_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">header_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">CoordComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">,</span> <span class="n">dim</span><span class="p">))</span></div>


<div class="viewcode-block" id="CoordsTable.sizeHint">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.CoordsTable.sizeHint">[docs]</a>
    <span class="k">def</span> <span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to adjust the heigth based upon the header and the</span>
<span class="sd">        first row&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">CoordsTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="DragDropTable">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable">[docs]</a>
<span class="k">class</span> <span class="nc">DragDropTable</span><span class="p">(</span><span class="n">QTableWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table that allows to exchange rows via drag and drop</span>

<span class="sd">    This class was mainly taken from</span>
<span class="sd">    http://stackoverflow.com/questions/26227885/drag-and-drop-rows-within-qtablewidget</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DragDropTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setDragEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDragDropOverwriteMode</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDropIndicatorShown</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">ExtendedSelection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDragDropMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">InternalMove</span><span class="p">)</span>

<div class="viewcode-block" id="DragDropTable.dropEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable.dropEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">dropEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">dropAction</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MoveAction</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">dragDropMode</span><span class="p">()</span> <span class="o">==</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">InternalMove</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropOn</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">DragDropTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dropEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>


<div class="viewcode-block" id="DragDropTable.moveRows">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable.moveRows">[docs]</a>
    <span class="k">def</span> <span class="nf">moveRows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move all selected rows to the given `row`&quot;&quot;&quot;</span>
        <span class="n">selRows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">selRows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">dropRow</span> <span class="o">=</span> <span class="n">row</span>
        <span class="k">if</span> <span class="n">dropRow</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">dropRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">dropRow</span> <span class="o">-</span> <span class="n">top</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">selRows</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="n">offset</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

        <span class="n">selRows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>

        <span class="n">top</span> <span class="o">=</span> <span class="n">selRows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">dropRow</span> <span class="o">-</span> <span class="n">top</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">selRows</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="n">offset</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()):</span>
                <span class="n">source</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">remove</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">selRows</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">removeRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span></div>


<div class="viewcode-block" id="DragDropTable.droppingOnItself">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable.droppingOnItself">[docs]</a>
    <span class="k">def</span> <span class="nf">droppingOnItself</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">dropAction</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">dropAction</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dragDropMode</span><span class="p">()</span> <span class="o">==</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">InternalMove</span><span class="p">:</span>
            <span class="n">dropAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MoveAction</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span>
            <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">possibleActions</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MoveAction</span>
            <span class="ow">and</span> <span class="n">dropAction</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MoveAction</span>
        <span class="p">):</span>
            <span class="n">selectedIndexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>
            <span class="n">child</span> <span class="o">=</span> <span class="n">index</span>
            <span class="k">while</span> <span class="n">child</span><span class="o">.</span><span class="n">isValid</span><span class="p">()</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootIndex</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">selectedIndexes</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="n">child</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="DragDropTable.dropOn">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable.dropOn">[docs]</a>
    <span class="k">def</span> <span class="nf">dropOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">isAccepted</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QModelIndex</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">()):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indexAt</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">isValid</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visualRect</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
                <span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
            <span class="p">):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootIndex</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">supportedDropActions</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">event</span><span class="o">.</span><span class="n">dropAction</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootIndex</span><span class="p">():</span>
                <span class="n">dropIndicatorPosition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">(</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">visualRect</span><span class="p">(</span><span class="n">index</span><span class="p">),</span> <span class="n">index</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">dropIndicatorPosition</span> <span class="o">==</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">AboveItem</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
                    <span class="c1"># index = index.parent()</span>
                <span class="k">elif</span> <span class="n">dropIndicatorPosition</span> <span class="o">==</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">BelowItem</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="c1"># index = index.parent()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">droppingOnItself</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">moveRows</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">remove</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">source</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span></div>


<div class="viewcode-block" id="DragDropTable.position">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.DragDropTable.position">[docs]</a>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">OnViewport</span>
        <span class="n">margin</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">-</span> <span class="n">rect</span><span class="o">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">margin</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">AboveItem</span>
        <span class="k">elif</span> <span class="n">rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span> <span class="o">-</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">margin</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">BelowItem</span>
        <span class="k">elif</span> <span class="n">rect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">OnItem</span>

        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">OnItem</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">flags</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsDropEnabled</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">rect</span><span class="o">.</span><span class="n">center</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">():</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">AboveItem</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">BelowItem</span>
        <span class="k">return</span> <span class="n">r</span></div>
</div>



<div class="viewcode-block" id="ArrayTable">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable">[docs]</a>
<span class="k">class</span> <span class="nc">ArrayTable</span><span class="p">(</span><span class="n">DragDropTable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Table that shows the arrays that will be used for plotting</span>

<span class="sd">    It contains the following columns:</span>

<span class="sd">    1. The variable column which holds the variable names of the arrays.</span>
<span class="sd">       multiple variables may be separated by &#39;;;&#39;</span>
<span class="sd">    2. The array name. The :attr:`psyplot.data.InteractiveBase.arr_name`</span>
<span class="sd">       attribute. Depending on the plot methods</span>
<span class="sd">       :attr:`~psyplot.project._PlotterInterface._prefer_list`, multiple</span>
<span class="sd">       array names are allowed or not. If this attribute is True,</span>
<span class="sd">       arrays with the same array name will be concatenated into one</span>
<span class="sd">       :class:`psyplot.data.InteractiveList`</span>
<span class="sd">    3. The axes column. Use the right-click context menu to select a</span>
<span class="sd">       subplot</span>
<span class="sd">    4. The check column. Checks for variable names, array names, axes and</span>
<span class="sd">       dimensions via the :meth:`psyplot.project._PlotterInterface.check_data`</span>
<span class="sd">       method</span>
<span class="sd">    5. Columns containing the dimension informations&quot;&quot;&quot;</span>

    <span class="c1">#: Pattern to interprete subplots</span>
    <span class="n">subplot_patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;\((?P&lt;fig&gt;\d+),\s*&quot;</span>  <span class="c1"># figure</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;rows&gt;\d+),\s*&quot;</span>  <span class="c1"># rows</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;cols&gt;\d+),\s*&quot;</span>  <span class="c1"># columns</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;num1&gt;\d+),\s*&quot;</span>  <span class="c1"># position</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;num2&gt;\d+)\s*\)&quot;</span>  <span class="c1"># end subplot</span>
    <span class="p">)</span>

    <span class="c1">#: pattern to interprete arbitrary axes</span>
    <span class="n">axes_patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;\((?P&lt;fig&gt;\d+),\s*&quot;</span>  <span class="c1"># figure</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;x0&gt;0*\.\d+),\s*&quot;</span>  <span class="c1"># lower left x</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;y0&gt;0*\.\d+),\s*&quot;</span>  <span class="c1"># lower left y</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;x1&gt;0*\.\d+),\s*&quot;</span>  <span class="c1"># upper right x</span>
        <span class="sa">r</span><span class="s2">&quot;(?P&lt;y1&gt;0*\.\d+)\s*\)&quot;</span>  <span class="c1"># upper right y</span>
    <span class="p">)</span>

    <span class="c1">#: The separator for variable names</span>
    <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;;;&quot;</span>

    <span class="c1">#: Tool tip for the variable column</span>
    <span class="n">VARIABLE_TT</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The variables of the array from the dataset. Multiple&quot;</span>
        <span class="s2">&quot;variables for one array may be separated by &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sep</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1">#: Base tool tip for a dimension column</span>
    <span class="n">DIMS_TT</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;The values for dimension </span><span class="si">%s</span><span class="s2">.&quot;</span>
        <span class="s2">&quot; You can use integers either explicit, e.g.&quot;</span>
        <span class="s2">&quot;&lt;ul&gt;&quot;</span>
        <span class="s2">&quot;&lt;li&gt;1, 2, 3, ...,&lt;/li&gt;&quot;</span>
        <span class="s2">&quot;&lt;/ul&gt;&quot;</span>
        <span class="s2">&quot;or slices like &lt;em&gt;start:end:step&lt;/em&gt;, e.g.&quot;</span>
        <span class="s2">&quot;&lt;ul&gt;&quot;</span>
        <span class="s2">&quot;&lt;li&gt;&#39;1:6:2&#39;&lt;/li&gt;&quot;</span>
        <span class="s2">&quot;&lt;/ul&gt;&quot;</span>
        <span class="s2">&quot;where the latter is equivalent to &#39;1, 3, 5&#39;&quot;</span>
    <span class="p">)</span>

<div class="viewcode-block" id="ArrayTable.dropEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.dropEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">dropEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to call the :meth:`check_arrays` after the call&quot;&quot;&quot;</span>
        <span class="c1"># apparently the row deletion occurs after the call of this method.</span>
        <span class="c1"># therefore our call of `check_arrays` leads to the (wrong) result</span>
        <span class="c1"># of a duplicated entry. We therefore filter them out here and make</span>
        <span class="c1"># sure that those arrays are not considered when checking for</span>
        <span class="c1"># duplicates</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_names</span><span class="p">,</span> <span class="p">[</span><span class="n">msg</span> <span class="k">for</span> <span class="n">b</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_arrays</span><span class="p">()])</span>
        <span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ArrayTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dropEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">ignores</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">arr_name</span>
            <span class="k">for</span> <span class="n">arr_name</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">messages</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">msg</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Found duplicated entry of&quot;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_arrays</span><span class="p">(</span><span class="n">ignore_duplicates</span><span class="o">=</span><span class="n">ignores</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prefer_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the _prefer_list attribute of the plot_method&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span><span class="o">.</span><span class="n">_prefer_list</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The names that are currently in use&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefer_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arr_col</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">asstring</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">())),</span>
            <span class="p">)</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vnames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of variable names per array&quot;&quot;&quot;</span>
        <span class="n">var_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_col</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">var_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;;&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">())</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">arr_names_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The final dictionary containing the array names necessary for the</span>
<span class="sd">        `arr_names` parameter in the</span>
<span class="sd">        :meth:`psyplot.data.ArrayList.from_dataset` method&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arr_col</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">arr_name</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span><span class="o">.</span><span class="n">_prefer_list</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">arr_name</span><span class="p">,</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span>
                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_variables</span><span class="p">(</span><span class="n">irow</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_dims</span><span class="p">(</span><span class="n">irow</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">arr_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_variables</span><span class="p">(</span><span class="n">irow</span><span class="p">)}</span>
                <span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_dims</span><span class="p">(</span><span class="n">irow</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">ret</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of axes settings corresponding to the arrays in the</span>
<span class="sd">        :attr:`arr_names_dict`&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arr_col</span>
        <span class="n">axes_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_col</span>
        <span class="c1"># get the projection</span>
        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">pm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">projection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span><span class="o">.</span><span class="n">plotter_cls</span><span class="o">.</span><span class="n">_get_sample_projection</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">projection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;projection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">projection</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">arr_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arr_name</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">d</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr_name</span><span class="p">)</span>
            <span class="n">axes_type</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">axes_col</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">axes_type</span> <span class="o">==</span> <span class="s2">&quot;subplot&quot;</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SubplotCreator</span><span class="o">.</span><span class="n">create_subplot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">axes_type</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">AxesCreator</span><span class="o">.</span><span class="n">create_axes</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">var_col</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The index of the variable column&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">arr_col</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The index of the array name column&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axes_col</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The index of the axes column&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">check_col</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The index of the check column&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CHECK_LABEL</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_func</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        get_func: function</span>
<span class="sd">            The function that, when called without arguments, returns the</span>
<span class="sd">            xarray.Dataset to use</span>
<span class="sd">        columns: list of str</span>
<span class="sd">            The coordinates in the dataset&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ArrayTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span> <span class="o">=</span> <span class="n">get_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span> <span class="o">=</span> <span class="s2">&quot;variable&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span> <span class="o">=</span> <span class="s2">&quot;array name&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span> <span class="o">=</span> <span class="s2">&quot;axes&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_LABEL</span> <span class="o">=</span> <span class="s2">&quot;check&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CHECK_LABEL</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CustomContextMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customContextMenuRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showAxesCreator</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_columns</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">var_col</span><span class="p">,</span> <span class="n">VariableItemDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItemDelegateForColumn</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arr_col</span><span class="p">,</span> <span class="n">ArrayNameItemDelegate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itemChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">check_item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itemChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_other_items</span><span class="p">)</span>

<div class="viewcode-block" id="ArrayTable.set_columns">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.set_columns">[docs]</a>
    <span class="k">def</span> <span class="nf">set_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">columns</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the columns of the table</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        columns: list of str</span>
<span class="sd">            The coordinates in the dataset&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">column_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column_labels</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span> <span class="o">+</span> <span class="n">columns</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DIMS_TT</span> <span class="o">%</span> <span class="n">col</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizontalHeaderItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">var_col</span><span class="p">)</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_TT</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.setup_from_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.setup_from_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">setup_from_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_method</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill the table based upon the given dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ds: xarray.Dataset or None</span>
<span class="sd">            If None, the dataset from the :attr:`get_ds` function is used</span>
<span class="sd">        plot_method: psyplot.project._PlotterInterface or None</span>
<span class="sd">            The plot method of the :class:`psyplot.project.ProjectPlotter`</span>
<span class="sd">            class or None if no plot shall be made&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">plot_method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_pm</span><span class="p">(</span><span class="n">plot_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_columns</span><span class="p">([])</span>
            <span class="k">return</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
        <span class="n">vnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">variables</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dims</span> <span class="o">=</span> <span class="n">dims</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">vname</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span> <span class="k">for</span> <span class="n">vname</span> <span class="ow">in</span> <span class="n">vnames</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dims</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_columns</span><span class="p">(</span><span class="n">dims</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.next_available_name">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.next_available_name">[docs]</a>
    <span class="k">def</span> <span class="nf">next_available_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gives the next possible name to use&quot;&quot;&quot;</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
        <span class="n">current_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_names</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="n">psy</span><span class="o">.</span><span class="n">gcp</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">next_available_name</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">counter</span><span class="o">=</span><span class="n">counter</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_names</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">name</span></div>


<div class="viewcode-block" id="ArrayTable.insert_array">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.insert_array">[docs]</a>
    <span class="k">def</span> <span class="nf">insert_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Appends the settings for an array the the list in a new row&quot;&quot;&quot;</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">)</span>
        <span class="n">irow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">irow</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">asstring</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">next_available_name</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">dims</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">icol</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">icol</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="n">dim</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">check</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_array</span><span class="p">(</span><span class="n">irow</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.remove_arrays">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.remove_arrays">[docs]</a>
    <span class="k">def</span> <span class="nf">remove_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove array rows from the list</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        selected: bool</span>
<span class="sd">            If True, only the selected rows are removed&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
            <span class="n">irows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">irows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="n">irows</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeRow</span><span class="p">(</span><span class="n">irow</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.update_selected">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.update_selected">[docs]</a>
    <span class="k">def</span> <span class="nf">update_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the dimensions of the selectiond arrays with the given</span>
<span class="sd">        `dims`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        check: bool</span>
<span class="sd">            whether the array shall be checked afterwards</span>
<span class="sd">        dims: dict</span>
<span class="sd">            a mapping from coordinate names to string values that shall be</span>
<span class="sd">            appended to the current text&quot;&quot;&quot;</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="n">irows</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()}</span>
        <span class="n">var_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="n">irows</span><span class="p">:</span>
            <span class="n">vname</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">asstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">var_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
                <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sep</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="n">var_dims</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">vname</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">var_dims</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">dims</span><span class="p">):</span>
                <span class="n">icol</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>
                <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">icol</span><span class="p">)</span>
                <span class="n">curr_text</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">curr_text</span><span class="p">:</span>
                    <span class="n">curr_text</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">curr_text</span> <span class="o">+</span> <span class="n">dims</span><span class="p">[</span><span class="n">dim</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">check</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="n">irows</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_array</span><span class="p">(</span><span class="n">irow</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.add_subplots">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.add_subplots">[docs]</a>
    <span class="k">def</span> <span class="nf">add_subplots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">maxn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add multiple subplots to the selected arrays&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="n">irows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>
        <span class="n">irows</span> <span class="o">=</span> <span class="n">irows</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
        <span class="n">maxn</span> <span class="o">=</span> <span class="n">maxn</span> <span class="ow">or</span> <span class="n">rows</span> <span class="o">*</span> <span class="n">cols</span>
        <span class="n">figs</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span>
            <span class="o">*</span><span class="p">([</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">maxn</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">())</span>
        <span class="p">)</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxn</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">axes_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">)</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="n">irows</span><span class="p">:</span>
            <span class="n">arr_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">arr_item</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="n">num</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;(</span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">figs</span><span class="p">),</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">axes_col</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.add_single_subplot">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.add_single_subplot">[docs]</a>
    <span class="k">def</span> <span class="nf">add_single_subplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add one subplot to the selected arrays on multiple figures&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="n">irows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>
        <span class="n">irows</span> <span class="o">=</span> <span class="n">irows</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
        <span class="n">figs</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">())</span>
        <span class="n">num</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">rows</span> <span class="o">+</span> <span class="n">col</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">axes_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">)</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="n">irows</span><span class="p">:</span>
            <span class="n">arr_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">arr_item</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;(</span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">figs</span><span class="p">),</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">irow</span><span class="p">,</span> <span class="n">axes_col</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.showAxesCreator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.showAxesCreator">[docs]</a>
    <span class="k">def</span> <span class="nf">showAxesCreator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Context menu for right-click on a row&quot;&quot;&quot;</span>
        <span class="n">irows</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">({</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">irows</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes_creator_action</span><span class="p">(</span><span class="n">irows</span><span class="p">))</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span></div>


<div class="viewcode-block" id="ArrayTable.axes_creator_action">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.axes_creator_action">[docs]</a>
    <span class="k">def</span> <span class="nf">axes_creator_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Action to open a :class:`AxesCreatorCollection` for the selected</span>
<span class="sd">        rows&quot;&quot;&quot;</span>
        <span class="n">axes_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">axes_col</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Select subplot&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">types_and_args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes_info</span><span class="p">,</span> <span class="n">items</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types_and_args</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">types</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">t</span> <span class="o">==</span> <span class="n">types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;subplot&quot;</span><span class="p">:</span>
                <span class="n">creator_kws</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fig&quot;</span><span class="p">,</span> <span class="s2">&quot;rows&quot;</span><span class="p">,</span> <span class="s2">&quot;cols&quot;</span><span class="p">,</span> <span class="s2">&quot;num1&quot;</span><span class="p">,</span> <span class="s2">&quot;num2&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
                <span class="n">creator_kws</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fig&quot;</span><span class="p">,</span> <span class="s2">&quot;x0&quot;</span><span class="p">,</span> <span class="s2">&quot;y0&quot;</span><span class="p">,</span> <span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;y1&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">creator_kws</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="n">types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types_and_args</span><span class="p">]</span>

            <span class="c1">#: the initialization keywords of the :class:`SubplotCreator` class</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="k">for</span> <span class="n">kw</span><span class="p">,</span> <span class="n">vals</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">creator_kws</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">):</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="n">kw</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_open_axes_creator</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">action</span></div>


    <span class="k">def</span> <span class="nf">_change_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">iterator</span><span class="p">):</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">iterator</span><span class="p">):</span>
            <span class="n">arr_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="n">arr_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arr_name</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr_name</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_open_axes_creator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_axes_creator&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_axes_creator</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axes_creator</span> <span class="o">=</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">AxesCreatorCollection</span><span class="p">(</span>
                <span class="n">func_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span>
            <span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">okpressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_change_axes</span><span class="p">,</span> <span class="n">items</span><span class="p">))</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">func</span>

<div class="viewcode-block" id="ArrayTable.axes_info">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.axes_info">[docs]</a>
    <span class="k">def</span> <span class="nf">axes_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interpretes an axes information&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="n">isstring</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">else</span> <span class="n">asstring</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot_patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;subplot&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()))</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">groupdict</span><span class="p">()[</span><span class="s2">&quot;fig&quot;</span><span class="p">])]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="ArrayTable.set_pm">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.set_pm">[docs]</a>
    <span class="k">def</span> <span class="nf">set_pm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the plot method&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_arrays</span><span class="p">()</span></div>


<div class="viewcode-block" id="ArrayTable.check_item">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.check_item">[docs]</a>
    <span class="k">def</span> <span class="nf">check_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check the array corresponding to the given item&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">column</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CHECK_LABEL</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">irow</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">other_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span>
                <span class="n">irow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">other_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_array</span><span class="p">(</span><span class="n">irow</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.update_other_items">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.update_other_items">[docs]</a>
    <span class="k">def</span> <span class="nf">update_other_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the axes information of the other items corresponding</span>
<span class="sd">        that have the same array name as the array corresponding to the given</span>
<span class="sd">        `item`&quot;&quot;&quot;</span>
        <span class="n">axes_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AXES_LABEL</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefer_list</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">column</span><span class="p">()</span> <span class="o">!=</span> <span class="n">axes_col</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">this_row</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="n">arr_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">this_row</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arr_item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">arr_name</span> <span class="o">=</span> <span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">row</span> <span class="o">!=</span> <span class="n">this_row</span><span class="p">:</span>
                <span class="n">arr_item2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">arr_item2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">arr_item2</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">arr_name</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">axes_col</span><span class="p">)</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="ArrayTable.get_all_rows">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.get_all_rows">[docs]</a>
    <span class="k">def</span> <span class="nf">get_all_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all the rows that have the same array name as the given `row`&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">check_item</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="n">arr_name</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span><span class="o">.</span><span class="n">_prefer_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">row</span><span class="p">]</span>
        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="n">arr_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">())</span> <span class="k">if</span> <span class="n">check_item</span><span class="p">(</span><span class="n">r</span><span class="p">)]</span></div>


<div class="viewcode-block" id="ArrayTable.check_array">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.check_array">[docs]</a>
    <span class="k">def</span> <span class="nf">check_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">ignore_duplicates</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;check whether the array variables are valid, the array name is</span>
<span class="sd">        valid, the axes info is valid and the dimensions&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">set_check</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
            <span class="n">check_item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">check_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">check_item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">valid</span><span class="p">:</span>
                <span class="n">check_item</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;valid.png&quot;</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="n">valid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">check_item</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;warning.png&quot;</span><span class="p">)))</span>
                <span class="n">check_item</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">check_item</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;invalid.png&quot;</span><span class="p">)))</span>
                <span class="n">check_item</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">check_col</span><span class="p">,</span> <span class="n">check_item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resizeColumnToContents</span><span class="p">(</span><span class="n">check_col</span><span class="p">)</span>

        <span class="n">check_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CHECK_LABEL</span><span class="p">)</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ----------------- check if a variable is provided -------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="n">var_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">var_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">asstring</span><span class="p">(</span><span class="n">var_item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one variable name must be provided!&quot;</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ----------------- check for duplicates of array names ---------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="n">arr_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARRAY_LABEL</span><span class="p">)</span>
        <span class="n">arr_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">arr_col</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">valid</span> <span class="ow">and</span> <span class="n">arr_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">arr_name</span> <span class="o">=</span> <span class="n">arr_item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arr_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_duplicates</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">arr_name</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;An array name must be provided&quot;</span>
                    <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">name</span>
                            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_names</span>
                            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">arr_name</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                    <span class="o">&gt;</span> <span class="mi">1</span>
                <span class="p">):</span>
                    <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Found duplicated entry of &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arr_name</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ------- check the plotmethod if necessary and set the icon ----------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="k">if</span> <span class="n">valid</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_rows</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="n">checks</span><span class="p">,</span> <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_method</span><span class="o">.</span><span class="n">check_data</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">(),</span>
                <span class="n">name</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_variables</span><span class="p">,</span> <span class="n">rows</span><span class="p">)),</span>
                <span class="n">dims</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_dims</span><span class="p">,</span> <span class="n">rows</span><span class="p">)),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">row2</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">checks</span><span class="p">,</span> <span class="n">messages</span><span class="p">):</span>
                <span class="n">set_check</span><span class="p">(</span><span class="n">row2</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">valid</span> <span class="o">=</span> <span class="n">checks</span><span class="p">[</span><span class="n">rows</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">)]</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="n">rows</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">row</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">set_check</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">valid</span><span class="p">,</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="ArrayTable.check_arrays">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.ArrayTable.check_arrays">[docs]</a>
    <span class="k">def</span> <span class="nf">check_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience function to check all arrays using the</span>
<span class="sd">        :meth:`check_array` method&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">check_array</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
        <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_str2slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">s</span><span class="p">[:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

    <span class="k">def</span> <span class="nf">_get_dims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">dim</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dims</span><span class="p">,</span>
            <span class="nb">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">),</span>
                <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()),</span>
            <span class="p">),</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">item</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                    <span class="n">slices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_str2slice</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)))</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">slices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">slices</span> <span class="o">=</span> <span class="n">slices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">ret</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="n">slices</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_get_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="n">var_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desc_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VARIABLE_LABEL</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">asstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">var_col</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ret</span><span class="p">):</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ds</span> <span class="k">if</span> <span class="n">asstring</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ret</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ret</span></div>



<div class="viewcode-block" id="SubplotCreator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator">[docs]</a>
<span class="k">class</span> <span class="nc">SubplotCreator</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Select a subplot to which will be created (if not already existing) when</span>
<span class="sd">    making the plot&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig: int or None</span>
<span class="sd">            The number of the figure</span>
<span class="sd">        rows: int</span>
<span class="sd">            The number of rows for the gridspec</span>
<span class="sd">        cols: int</span>
<span class="sd">            The number of columns for the gridspec</span>
<span class="sd">        num1: int</span>
<span class="sd">            The number of the upper left corner starting from 1</span>
<span class="sd">        num2: int or None</span>
<span class="sd">            The number of the lower right corner starting from 1. If None,</span>
<span class="sd">            `num1` is used&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SubplotCreator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Figure number:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fig</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QIntValidator</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rows_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;No. of rows:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rows</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QIntValidator</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9999</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cols_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;No. of columns:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QIntValidator</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9999</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num1_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Subplot number:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num1</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span>
            <span class="n">QIntValidator</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">cols</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num2_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;End of the plot&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num2</span> <span class="ow">or</span> <span class="n">num1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span>
            <span class="n">QIntValidator</span><span class="p">(</span>
                <span class="n">num1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">cols</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">ContiguousSelection</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">resizeRowsToContents</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_table</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_table</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_table</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_selected_from_num1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_num2_validator</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_selected_from_num2</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_num_edit</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_label</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_label</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num2_label</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

<div class="viewcode-block" id="SubplotCreator.create_subplot">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.create_subplot">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_subplot</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a subplot for the given figure</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig: :class:`matplotlib.figure.Figure` or int</span>
<span class="sd">            If integer, the :func:`matplotlib.pyplot.figure` function is used</span>
<span class="sd">        rows: int</span>
<span class="sd">            Number of rows for the gridspec</span>
<span class="sd">        cols: int</span>
<span class="sd">            Number of columns for the gridspec</span>
<span class="sd">        num1: int</span>
<span class="sd">            The subplot number of the upper left corner in the grid (starting</span>
<span class="sd">            from 1!)</span>
<span class="sd">        num2: None or int</span>
<span class="sd">            The subplot number of the lower left corner in the grid (starting</span>
<span class="sd">            from 1!). If None, `num1` will be used</span>
<span class="sd">        ``**kwargs``</span>
<span class="sd">            Any other keyword argument for the</span>
<span class="sd">            :meth:`matplotlib.figure.Figure.add_subplot` method</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        mpl.axes.Subplot</span>
<span class="sd">            The new created subplot&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
                <span class="n">fig</span>
                <span class="ow">or</span> <span class="nb">next</span><span class="p">(</span>
                    <span class="n">num</span>
                    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">num1</span> <span class="o">==</span> <span class="n">num2</span><span class="p">:</span>
            <span class="n">num2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">num2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">num2</span> <span class="o">=</span> <span class="n">num2</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="n">num1</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># first check if an axes with this specification already exists and if</span>
        <span class="c1"># yes, return it</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="n">ss</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_subplotspec</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ss</span><span class="o">.</span><span class="n">num1</span> <span class="o">==</span> <span class="n">num1</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">ss</span><span class="o">.</span><span class="n">num2</span> <span class="o">==</span> <span class="n">num2</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">ss</span><span class="o">.</span><span class="n">num2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num1</span> <span class="o">==</span> <span class="n">num2</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">num2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ss</span><span class="o">.</span><span class="n">num2</span> <span class="o">==</span> <span class="n">num1</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">gs</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">get_gridspec</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">gs</span><span class="o">.</span><span class="n">get_geometry</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">ax</span>
        <span class="c1"># if it does not exist, create a new one</span>
        <span class="n">gs</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">gridspec</span><span class="o">.</span><span class="n">GridSpec</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">gridspec</span><span class="o">.</span><span class="n">SubplotSpec</span><span class="p">(</span><span class="n">gs</span><span class="p">,</span> <span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.setup_table">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.setup_table">[docs]</a>
    <span class="k">def</span> <span class="nf">setup_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set up the table based upon the number of rows and columns in the</span>
<span class="sd">        rows and cols line edit&quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">cols</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">selected</span> <span class="o">/</span> <span class="p">(</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))),</span>
                <span class="p">((</span><span class="n">selected</span> <span class="o">%</span> <span class="n">cols</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">cols</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">)),</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">resizeRowsToContents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">validator</span><span class="p">()</span><span class="o">.</span><span class="n">setTop</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rows</span> <span class="o">*</span> <span class="n">cols</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_num2_validator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_selected_from_num1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span></div>


<div class="viewcode-block" id="SubplotCreator.set_num2_validator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.set_num2_validator">[docs]</a>
    <span class="k">def</span> <span class="nf">set_num2_validator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the validator range for the num2 line edit&quot;&quot;&quot;</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="n">num1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">validator</span><span class="p">()</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span>
            <span class="n">num1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">cols</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.set_selected_from_num1">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.set_selected_from_num1">[docs]</a>
    <span class="k">def</span> <span class="nf">set_selected_from_num1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the selection of the table after changes of</span>
<span class="sd">        :attr:`num1_edit`&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="n">num1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_selected</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.set_selected_from_num2">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.set_selected_from_num2">[docs]</a>
    <span class="k">def</span> <span class="nf">set_selected_from_num2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the selection of the table after changes of :attr:`num2_edit`&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">num1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_selected</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.set_selected">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.set_selected">[docs]</a>
    <span class="k">def</span> <span class="nf">set_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the selection in the table based upon `num1` and `num2`&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">cols</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">sel_rows</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">num1</span> <span class="o">/</span> <span class="p">(</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))),</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">num2</span> <span class="o">/</span> <span class="p">(</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">)</span>
        <span class="n">sel_cols</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span>
            <span class="p">((</span><span class="n">num1</span> <span class="o">%</span> <span class="n">cols</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">cols</span><span class="p">,</span> <span class="p">(((</span><span class="n">num2</span> <span class="o">%</span> <span class="n">cols</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">cols</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">starmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">product</span><span class="p">(</span><span class="n">sel_rows</span><span class="p">,</span> <span class="n">sel_cols</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">item</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setSelected</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.update_num_edit">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.update_num_edit">[docs]</a>
    <span class="k">def</span> <span class="nf">update_num_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the :attr:`num1_edit` and :attr:`num2_edit` after the</span>
<span class="sd">        selection of the table changed&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">sel_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
        <span class="n">sel_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">column</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">sel_rows</span><span class="p">)</span> <span class="o">*</span> <span class="n">cols</span> <span class="o">+</span> <span class="nb">min</span><span class="p">(</span><span class="n">sel_cols</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">sel_rows</span><span class="p">)</span> <span class="o">*</span> <span class="n">cols</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">sel_cols</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="SubplotCreator.get_iter">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.SubplotCreator.get_iter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the iterator over the axes&quot;&quot;&quot;</span>
        <span class="n">fig_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fig_text</span><span class="p">:</span>
            <span class="n">figs</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">fig_text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">figs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="p">(</span>
                    <span class="n">num</span>
                    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;1&quot;</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num2_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="n">num1</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span>
            <span class="o">%</span> <span class="p">(</span>
                <span class="n">fig</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rows_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cols_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                <span class="n">num1</span><span class="p">,</span>
                <span class="n">num2</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">fig</span> <span class="ow">in</span> <span class="n">figs</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="AxesViewer">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesViewer">[docs]</a>
<span class="k">class</span> <span class="nc">AxesViewer</span><span class="p">(</span><span class="n">QGraphicsView</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Widget to show a rectangle&quot;&quot;&quot;</span>

    <span class="n">sizeChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesViewer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOff</span><span class="p">)</span>

<div class="viewcode-block" id="AxesViewer.resizeEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesViewer.resizeEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesViewer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">resizeEvent</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSceneRect</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">())</span></div>
</div>



<div class="viewcode-block" id="AxesCreator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreator">[docs]</a>
<span class="k">class</span> <span class="nc">AxesCreator</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Widget to setup an axes in a arbitrary location&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig: int or None</span>
<span class="sd">            The figure number. If None, a new figure number will be used</span>
<span class="sd">        x0: float</span>
<span class="sd">            the x-coordinate of the lower left corner (between 0 and 1)</span>
<span class="sd">        y0: float</span>
<span class="sd">            the y-coordinate of the lower left corner (between 0 and 1)</span>
<span class="sd">        x1: float</span>
<span class="sd">            the x-coordinate of the upper right corner (between 0 and 1)</span>
<span class="sd">        y1: float</span>
<span class="sd">            the y-coordinate of the upper right corner (between 0 and 1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesCreator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Figure number:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">fig</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fig</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QIntValidator</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x0_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Lower left x: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x0</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QDoubleValidator</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y0_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Lower left y: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y0</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QDoubleValidator</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x1_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Upper right x: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x1</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QDoubleValidator</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y1_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Upper right y: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y1</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span><span class="n">QDoubleValidator</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">graphics_scene</span> <span class="o">=</span> <span class="n">QGraphicsScene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphics_view</span> <span class="o">=</span> <span class="n">AxesViewer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphics_scene</span><span class="p">)</span>

        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphics_view</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
        <span class="n">x0_resized</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
        <span class="n">y0_resized</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">box_widget</span> <span class="o">=</span> <span class="n">QGraphicsRectItem</span><span class="p">(</span>
            <span class="n">x0_resized</span><span class="p">,</span> <span class="n">y0_resized</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphics_scene</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphics_view</span><span class="o">.</span><span class="n">sizeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resize_rectangle</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x0_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y0_label</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1_label</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y1_label</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphics_view</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span><span class="p">]:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">resize_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphics_view</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

<div class="viewcode-block" id="AxesCreator.resize_rectangle">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreator.resize_rectangle">[docs]</a>
    <span class="k">def</span> <span class="nf">resize_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;resize the rectangle after changes of the widget size&quot;&quot;&quot;</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
        <span class="n">x0_resized</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
        <span class="n">y1_resized</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_widget</span><span class="o">.</span><span class="n">setRect</span><span class="p">(</span><span class="n">x0_resized</span><span class="p">,</span> <span class="n">y1_resized</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span></div>


<div class="viewcode-block" id="AxesCreator.create_axes">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreator.create_axes">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an axes for the given `fig`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig: int or None</span>
<span class="sd">            The figure number. If None, a new figure number will be used</span>
<span class="sd">        x0: float</span>
<span class="sd">            the x-coordinate of the lower left corner (between 0 and 1)</span>
<span class="sd">        y0: float</span>
<span class="sd">            the y-coordinate of the lower left corner (between 0 and 1)</span>
<span class="sd">        x1: float</span>
<span class="sd">            the x-coordinate of the upper right corner (between 0 and 1)</span>
<span class="sd">        y1: float</span>
<span class="sd">            the y-coordinate of the upper right corner (between 0 and 1)</span>
<span class="sd">        ``**kwargs``</span>
<span class="sd">            Any other keyword argument for the</span>
<span class="sd">            :meth:`matplotlib.figure.Figure.add_axes` method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
                <span class="n">fig</span>
                <span class="ow">or</span> <span class="nb">next</span><span class="p">(</span>
                    <span class="n">num</span>
                    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">])</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">])</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">transforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_extents</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">get_points</span><span class="p">(),</span> <span class="mi">5</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span><span class="o">.</span><span class="n">get_points</span><span class="p">(),</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="n">points</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">ax</span>
        <span class="k">return</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="AxesCreator.get_iter">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreator.get_iter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the iterator over the axes&quot;&quot;&quot;</span>
        <span class="n">fig_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fig_text</span><span class="p">:</span>
            <span class="n">figs</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">fig_text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

            <span class="n">figs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="p">(</span>
                    <span class="n">num</span>
                    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x0_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;0.125&quot;</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y0_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;0.1&quot;</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;0.9&quot;</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;0.9&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">fig</span> <span class="ow">in</span> <span class="n">figs</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="AxesSelector">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector">[docs]</a>
<span class="k">class</span> <span class="nc">AxesSelector</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Widget to select an already created axes</span>

<span class="sd">    Click the button, select your axes and click the button again&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesSelector</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Click to select axes&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">result_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msg_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_pickers</span><span class="p">)</span>

<div class="viewcode-block" id="AxesSelector.change_pickers">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.change_pickers">[docs]</a>
    <span class="k">def</span> <span class="nf">change_pickers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the pickers of the axes instances</span>

<span class="sd">        If the push button is clicked, we replace the existing pickers of the</span>
<span class="sd">        axes in order to select the plots. Otherwise we restore them&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Click when finished&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select an existing axes&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">result_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">allow_axes_select</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select an axes&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restore_pickers</span><span class="p">()</span></div>


<div class="viewcode-block" id="AxesSelector.unclick">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.unclick">[docs]</a>
    <span class="k">def</span> <span class="nf">unclick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Restore the original pickers&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_choose</span><span class="o">.</span><span class="n">click</span><span class="p">()</span></div>


<div class="viewcode-block" id="AxesSelector.allow_axes_select">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.allow_axes_select">[docs]</a>
    <span class="k">def</span> <span class="nf">allow_axes_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace make all axes pickable&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig_events</span> <span class="o">=</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickers</span> <span class="o">=</span> <span class="n">pickers</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">():</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="n">d</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s2">&quot;pick_event&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_picked_ax</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
                <span class="n">pickers</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">ax</span><span class="p">]</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_picker</span><span class="p">()</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="AxesSelector.restore_pickers">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.restore_pickers">[docs]</a>
    <span class="k">def</span> <span class="nf">restore_pickers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Restore the original pickers of the existing axes instances&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">cid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig_events</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">artist</span><span class="p">,</span> <span class="n">picker</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pickers</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">artist</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="n">picker</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig_events</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


<div class="viewcode-block" id="AxesSelector.get_picked_ax">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.get_picked_ax">[docs]</a>
    <span class="k">def</span> <span class="nf">get_picked_ax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to be called when an axes is picked&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">axes</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">result_label</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;;;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">inspect_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">))</span></div>


<div class="viewcode-block" id="AxesSelector.inspect_axes">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.inspect_axes">[docs]</a>
    <span class="k">def</span> <span class="nf">inspect_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inspect the given axes and get the right string for making a plot</span>
<span class="sd">        with it&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">matplotlib.axes</span> <span class="kn">import</span> <span class="n">SubplotBase</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">SubplotBase</span><span class="p">):</span>
            <span class="n">ss</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_subplotspec</span><span class="p">()</span>
            <span class="n">gs</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">get_gridspec</span><span class="p">()</span>
            <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">get_geometry</span><span class="p">()</span>
            <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">, </span><span class="si">%i</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
                <span class="n">rows</span><span class="p">,</span>
                <span class="n">cols</span><span class="p">,</span>
                <span class="n">ss</span><span class="o">.</span><span class="n">num1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="p">(</span><span class="n">ss</span><span class="o">.</span><span class="n">num2</span> <span class="ow">or</span> <span class="n">ss</span><span class="o">.</span><span class="n">num1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">box</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%i</span><span class="s2">, </span><span class="si">%1.5f</span><span class="s2">, </span><span class="si">%1.5f</span><span class="s2">, </span><span class="si">%1.5f</span><span class="s2">, </span><span class="si">%1.5f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">number</span><span class="p">]</span> <span class="o">+</span> <span class="n">points</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="AxesSelector.setVisible">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.setVisible">[docs]</a>
    <span class="k">def</span> <span class="nf">setVisible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to restore the pickers if the widget is made invisible&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesSelector</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unclick</span><span class="p">()</span></div>


<div class="viewcode-block" id="AxesSelector.close">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to restore the pickers if the widget is closed&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unclick</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AxesSelector</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="AxesSelector.get_iter">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesSelector.get_iter">[docs]</a>
    <span class="k">def</span> <span class="nf">get_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the iterator over the axes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">txt</span> <span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_label</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;;&quot;</span><span class="p">)))</span></div>
</div>



<div class="viewcode-block" id="AxesCreatorCollection">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreatorCollection">[docs]</a>
<span class="k">class</span> <span class="nc">AxesCreatorCollection</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wrapper for a QToolBox that holds the different possibilities to select</span>
<span class="sd">    an axes</span>

<span class="sd">    When the user finished, the :attr:`okpressed` symbol is emitted with an</span>
<span class="sd">    infinite iterator of strings. Possible widgets for the toolbox are</span>
<span class="sd">    determined by the :attr:`widgets` attribute&quot;&quot;&quot;</span>

    <span class="c1">#: signal that is emitted when the &#39;Ok&#39; pushbutton is pressed and the user</span>
    <span class="c1">#: finished the selection</span>
    <span class="n">okpressed</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">GeneratorType</span><span class="p">)</span>

    <span class="c1">#: key, title and class fot the widget that is used to create an</span>
    <span class="c1">#: axes</span>
    <span class="n">widgets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;subplot&quot;</span><span class="p">,</span> <span class="s2">&quot;Subplot in a grid&quot;</span><span class="p">,</span> <span class="n">SubplotCreator</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="s2">&quot;Arbitray position&quot;</span><span class="p">,</span> <span class="n">AxesCreator</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;choose&quot;</span><span class="p">,</span> <span class="s2">&quot;Existing subplot&quot;</span><span class="p">,</span> <span class="n">AxesSelector</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key: str or None</span>
<span class="sd">            if string, it must be one of the keys in the :attr:`widgets`</span>
<span class="sd">            attribute</span>
<span class="sd">        func_kwargs: dict</span>
<span class="sd">            a dictionary that is passed to the class constructor determined by</span>
<span class="sd">            the `key` parameter if `key` is not None</span>
<span class="sd">        ``*args,**kwargs``</span>
<span class="sd">            Determined by the QWidget class&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AxesCreatorCollection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_cancel</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ok</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tb</span> <span class="o">=</span> <span class="n">QTabWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="o">.</span><span class="n">setTabPosition</span><span class="p">(</span><span class="n">QTabWidget</span><span class="o">.</span><span class="n">West</span><span class="p">)</span>
        <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widgets</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">func_name</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">func_kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_subplot</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ok</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_cancel</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_cancel</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_ok</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

<div class="viewcode-block" id="AxesCreatorCollection.create_subplot">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreatorCollection.create_subplot">[docs]</a>
    <span class="k">def</span> <span class="nf">create_subplot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method that is called whenn the ok button is pressed.</span>

<span class="sd">        It emits the :attr:`okpressed` signal with the iterator of the current</span>
<span class="sd">        widget in the toolbox&quot;&quot;&quot;</span>
        <span class="n">it</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="o">.</span><span class="n">currentWidget</span><span class="p">()</span><span class="o">.</span><span class="n">get_iter</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okpressed</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">it</span><span class="p">)</span></div>


<div class="viewcode-block" id="AxesCreatorCollection.close">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.AxesCreatorCollection.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;reimplemented to make sure that all widgets are closed when this one</span>
<span class="sd">        is closed&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tb</span><span class="o">.</span><span class="n">widget</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widgets</span><span class="p">))):</span>
            <span class="n">w</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AxesCreatorCollection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="PlotCreator">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator">[docs]</a>
<span class="k">class</span> <span class="nc">PlotCreator</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Widget to extract data from a dataset and eventually create a plot&quot;&quot;&quot;</span>

    <span class="c1">#: Tooltip for not making a plot</span>
    <span class="n">NO_PM_TT</span> <span class="o">=</span> <span class="s2">&quot;Choose a plot method (or choose none to only extract the data)&quot;</span>

    <span class="n">_preset</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_decoder</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help_explorer</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;help_explorer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PlotCreator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Create plots&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span> <span class="o">=</span> <span class="n">PyErrorMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="n">psy</span><span class="o">.</span><span class="n">gcp</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span> <span class="o">=</span> <span class="n">splitter</span> <span class="o">=</span> <span class="n">QSplitter</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Vertical</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">w</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># -------------------------- children ---------------------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;The data source to use the data from&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_ds_combo</span><span class="p">(</span><span class="n">mp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_open_file</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_open_file</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;run_arrow.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_open_file</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Open a new dataset from the hard disk&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_get_ds</span> <span class="o">=</span> <span class="n">LoadFromConsoleButton</span><span class="p">(</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_get_ds</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Use a dataset already defined in the console&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pm_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Plot method: &quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_plot_method_combo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Preset&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_info</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_info</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;info.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_info</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Show information in the help explorer&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span> <span class="o">=</span> <span class="n">VariablesTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">fill_from_ds</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span> <span class="o">=</span> <span class="n">CoordsTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">fill_from_ds</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span> <span class="o">=</span> <span class="n">ArrayTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ds</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">setup_from_ds</span><span class="p">(</span><span class="n">plot_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_load</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_load</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Load the selected data arrays into memory when clicking on &quot;</span>
            <span class="s2">&quot;&lt;em&gt;Ok&lt;/em&gt;. Note that this might cause problems for large &quot;</span>
            <span class="s2">&quot;arrays!&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;close dropdowns&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Close drop down menues after selecting indices to plot&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;show coordinates&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Show the real coordinates instead of the indices in the drop &quot;</span>
            <span class="s2">&quot;down menues&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove_all</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove_all</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;minusminus.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove_all</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Remove all arrays&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;minus.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Remove selected arrays&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;plus.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Add arrays for the selected variables&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_all</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_all</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;plusplus.png&quot;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_all</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Add arrays for all variables in the dataset&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;No. of rows&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;No. sof columns&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_axis_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;No. of axes per figure&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_axis_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add new subplots&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Adds subplots for the selected arrays based the specified number &quot;</span>
            <span class="s2">&quot;of rows and columns&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">row_axis_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Row number:&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row_axis_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row_axis_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_axis_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Column number&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_axis_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_axis_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add one subplot&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Add one subplot for the specified row and column&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;Modify the formatoptions of the newly created plots.&quot;</span>
            <span class="s2">&quot;Values must be entered in yaml syntax&quot;</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span> <span class="o">=</span> <span class="n">RcParamsTree</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">value_col</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">setHeaderLabels</span><span class="p">([</span><span class="s2">&quot;Formatoption&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">])</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ---------------------------- connections ----------------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="c1"># ----------------- dataset combo connections ------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_open_file</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_get_ds</span><span class="o">.</span><span class="n">object_loaded</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_new_ds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_ds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">fill_from_ds</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">fill_from_ds</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">setup_from_ds</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect_combo_boxes</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="c1"># ------------------- plot method connections -------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">_summary</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">s</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">NO_PM_TT</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_info</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_pm_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">set_pm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_fmt_tree</span><span class="p">)</span>

        <span class="c1"># ------------------- preset button connections -----------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_preset</span><span class="p">)</span>

        <span class="c1"># --------------------- Combo box connections -------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_close_popups</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_comboboxes</span><span class="p">)</span>
        <span class="c1"># connect leftclick of combo boxes to create new arrays or update the</span>
        <span class="c1"># selected</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_combo_boxes</span><span class="p">()</span>

        <span class="c1"># ----------------- add and remove button connections -----------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert_array</span><span class="p">(</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">selected_variables</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert_array</span><span class="p">(</span>
                <span class="n">variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">variables</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">remove_arrays</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_remove</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">remove_arrays</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># ------------- axes creation connections -----------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="o">.</span><span class="n">click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="o">.</span><span class="n">click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_axis_edit</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="o">.</span><span class="n">click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setup_subplots</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row_axis_edit</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span><span class="o">.</span><span class="n">click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_axis_edit</span><span class="o">.</span><span class="n">returnPressed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span><span class="o">.</span><span class="n">click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setup_subplot</span><span class="p">)</span>

        <span class="c1"># -------------------- create and cancel connections ------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span>
            <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span>
        <span class="p">)</span>
        <span class="n">bbox</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_plots</span><span class="p">)</span>
        <span class="n">bbox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>

        <span class="c1"># -------------------- other connections ------------------------------</span>
        <span class="c1"># allow only to select either variables or newly created arrays in</span>
        <span class="c1"># order to control the behaviour of the combo box left click in</span>
        <span class="c1"># self.insert_array_from_combo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">clearSelection</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">itemSelectionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">clearSelection</span>
        <span class="p">)</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ---------------------------- layouts --------------------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ds_box</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_open_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_get_ds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_info</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbox_load</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_remove_all</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_remove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_all</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_axis_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_axis_edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_axes</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_axis_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_axis_edit</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_axis_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_axis_edit</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_add_single_axes</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="n">w</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="p">)</span>

        <span class="n">fmt_tree_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">fmt_tree_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_label</span><span class="p">)</span>
        <span class="n">fmt_tree_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">fmt_tree_layout</span><span class="p">)</span>

        <span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="p">)</span>

        <span class="n">hbox</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">hbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">splitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_fmt_tree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>

<div class="viewcode-block" id="PlotCreator.toggle_close_popups">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.toggle_close_popups">[docs]</a>
    <span class="k">def</span> <span class="nf">toggle_close_popups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the automatic closing of popups&quot;&quot;&quot;</span>
        <span class="n">close_popups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbox_close_popups</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">close_popups</span> <span class="o">=</span> <span class="n">close_popups</span></div>


<div class="viewcode-block" id="PlotCreator.reset_comboboxes">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.reset_comboboxes">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_comboboxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all comboboxes&quot;&quot;&quot;</span>
        <span class="n">use_coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cbox_use_coords</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">use_coords</span> <span class="o">=</span> <span class="n">use_coords</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">_is_empty</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="PlotCreator.fill_fmt_tree">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.fill_fmt_tree">[docs]</a>
    <span class="k">def</span> <span class="nf">fill_fmt_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pm</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">psyplot.project</span> <span class="k">as</span> <span class="nn">psy</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pm</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pm</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">pm</span><span class="p">)</span>
            <span class="n">plotter</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">plotter_cls</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preset</span><span class="p">:</span>
                <span class="n">plotter</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="n">psy</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">extract_fmts_from_preset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preset</span><span class="p">,</span> <span class="n">pm</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">rc</span> <span class="o">=</span> <span class="n">plotter</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">validators</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plotter</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">validate</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">plotter</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">descriptions</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">plotter</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">plotter</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
            <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">&quot;info.png&quot;</span><span class="p">))</span>
            <span class="n">docs_funcs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">partial</span><span class="p">(</span><span class="n">plotter</span><span class="o">.</span><span class="n">show_docs</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">plotter</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">top_level_items</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">bt</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">()</span>
                <span class="n">bt</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
                <span class="n">bt</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">docs_funcs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">setItemWidget</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">resizeColumnToContents</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_load_preset</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.setup_subplots">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.setup_subplots">[docs]</a>
    <span class="k">def</span> <span class="nf">setup_subplots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to be emitted to setup the subplots for the selected arrays</span>
<span class="sd">        on new figures&quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">maxn</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">add_subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">maxn</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.setup_subplot">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.setup_subplot">[docs]</a>
    <span class="k">def</span> <span class="nf">setup_subplot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to be emitted to setup one subplot at a specific location</span>
<span class="sd">        for each of the selected arrays on separate (new) figures&quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_axis_edit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">add_single_subplot</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.show_pm_info">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.show_pm_info">[docs]</a>
    <span class="k">def</span> <span class="nf">show_pm_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows info on the current plotting method in the help explorer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">help_explorer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">pm_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pm_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">help_explorer</span><span class="o">.</span><span class="n">show_help</span><span class="p">(</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">pm_name</span><span class="p">),</span> <span class="s2">&quot;psyplot.project.plot.&quot;</span> <span class="o">+</span> <span class="n">pm_name</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">help_explorer</span><span class="o">.</span><span class="n">show_rst</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            No plot</span>
<span class="sd">            =======</span>
<span class="sd">            No plot will be created, only the data is extracted&quot;&quot;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;no_plot&quot;</span><span class="p">,</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.connect_combo_boxes">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.connect_combo_boxes">[docs]</a>
    <span class="k">def</span> <span class="nf">connect_combo_boxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">leftclick</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">insert_array_from_combo</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.fill_plot_method_combo">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.fill_plot_method_combo">[docs]</a>
    <span class="k">def</span> <span class="nf">fill_plot_method_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes the names of the plotting methods in the current project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">_plot_methods</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NO_PM_TT</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.set_pm">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.set_pm">[docs]</a>
    <span class="k">def</span> <span class="nf">set_pm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_method</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">plot_method</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.create_plots">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.create_plots">[docs]</a>
    <span class="k">def</span> <span class="nf">create_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to be called when the `Create plot` button is pressed</span>

<span class="sd">        This method reads the data from the :attr:`array_table` attribute and</span>
<span class="sd">        makes the plot (or extracts the data) based upon the</span>
<span class="sd">        :attr:`plot_method` attribute&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">arr_names_dict</span>
        <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pm</span><span class="p">:</span>
            <span class="n">pm</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">psy</span><span class="o">.</span><span class="n">plot</span><span class="p">,</span> <span class="n">pm</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="n">default_dim</span><span class="p">,</span> <span class="n">default_slice</span><span class="p">)</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span>
                <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="n">names</span><span class="p">),</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">_default_dims</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">default_dim</span><span class="p">,</span> <span class="n">default_slice</span><span class="p">)</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;ax&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span>
                <span class="s2">&quot;fmt&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree</span><span class="o">.</span><span class="n">_get_rc</span><span class="p">()},</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_data</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">fig_nums</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()[:]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pm</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">,</span>
                <span class="n">arr_names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
                <span class="n">load</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cbox_load</span><span class="o">.</span><span class="n">isChecked</span><span class="p">(),</span>
                <span class="n">decoder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_decoder</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">())</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">fig_nums</span><span class="p">):</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span><span class="o">.</span><span class="n">showTraceback</span><span class="p">(</span><span class="s2">&quot;&lt;b&gt;Failed to create the plots!&lt;/b&gt;&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Error while creating the plots with </span><span class="si">%s</span><span class="s2">!&quot;</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="PlotCreator.load_preset">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.load_preset">[docs]</a>
    <span class="k">def</span> <span class="nf">load_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a preset file&quot;&quot;&quot;</span>
        <span class="n">fname</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="s2">&quot;Load preset&quot;</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_configdir</span><span class="p">(),</span> <span class="s2">&quot;presets&quot;</span><span class="p">),</span>
            <span class="s2">&quot;YAML files (*.yml *.yaml);;&quot;</span> <span class="s2">&quot;All files (*)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_preset</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.open_dataset">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.open_dataset">[docs]</a>
    <span class="k">def</span> <span class="nf">open_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fnames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opens a file dialog and the dataset that has been inserted&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">open_ds</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fnames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;concat_dim&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">psy</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">fnames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">psy</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span><span class="n">fnames</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fnames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fnames</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileNames</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="s2">&quot;Open dataset&quot;</span><span class="p">,</span>
                <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                <span class="s2">&quot;NetCDF files (*.nc *.nc4);;&quot;</span>
                <span class="s2">&quot;Shape files (*.shp);;&quot;</span>
                <span class="s2">&quot;All files (*)&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">with_qt5</span><span class="p">:</span>  <span class="c1"># the filter is passed as well</span>
                <span class="n">fnames</span> <span class="o">=</span> <span class="n">fnames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fnames</span><span class="p">,</span> <span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">fnames</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_new_ds</span><span class="p">(</span><span class="s2">&quot;ds&quot;</span><span class="p">,</span> <span class="n">ds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">fnames</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;decode_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">ds</span> <span class="o">=</span> <span class="n">open_ds</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span><span class="o">.</span><span class="n">showTraceback</span><span class="p">(</span>
                        <span class="s2">&quot;&lt;b&gt;Could not open dataset </span><span class="si">%s</span><span class="s2">&lt;/b&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fnames</span><span class="p">,)</span>
                    <span class="p">)</span>
                    <span class="k">return</span>
            <span class="n">fnames_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fnames</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_new_ds</span><span class="p">(</span><span class="n">fnames_str</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span> <span class="n">fnames_str</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.set_preset">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.set_preset">[docs]</a>
    <span class="k">def</span> <span class="nf">set_preset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">psyplot.project</span> <span class="k">as</span> <span class="nn">psy</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_preset</span> <span class="o">=</span> <span class="n">psy</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">_load_preset</span><span class="p">(</span><span class="n">preset</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_tree_widget</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_fmt_tree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pm_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>


<div class="viewcode-block" id="PlotCreator.set_decoder">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.set_decoder">[docs]</a>
    <span class="k">def</span> <span class="nf">set_decoder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decoder</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the decoder for the new plots.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_decoder</span> <span class="o">=</span> <span class="n">decoder</span></div>


<div class="viewcode-block" id="PlotCreator.add_new_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.add_new_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">add_new_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oname</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ds&quot;</span><span class="p">:</span> <span class="n">ds</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">fname</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s2">&quot;fname&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">insertItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;New: &quot;</span> <span class="o">+</span> <span class="n">oname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.set_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.set_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">set_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the current dataset&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;ds&quot;</span><span class="p">]</span></div>


<div class="viewcode-block" id="PlotCreator.fill_ds_combo">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.fill_ds_combo">[docs]</a>
    <span class="k">def</span> <span class="nf">fill_ds_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;fill the dataset combobox with datasets of the current main project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">setInsertPolicy</span><span class="p">(</span><span class="n">QComboBox</span><span class="o">.</span><span class="n">InsertAtBottom</span><span class="p">)</span>
        <span class="n">ds_descs</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">_get_ds_descriptions</span><span class="p">(</span>
            <span class="n">project</span><span class="o">.</span><span class="n">array_info</span><span class="p">(</span><span class="n">ds_description</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;</span><span class="si">%i</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">ds_desc</span><span class="p">[</span><span class="s2">&quot;fname&quot;</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ds_desc</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">ds_descs</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds_descs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ds</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.insert_array_from_combo">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.insert_array_from_combo">[docs]</a>
    <span class="k">def</span> <span class="nf">insert_array_from_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cb</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert new arrays into the dataset when the combobox is left-clicked&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">selected_variables</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">other_cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">other_cb</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
            <span class="n">dims</span><span class="p">[</span><span class="n">other_cb</span><span class="o">.</span><span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="n">ind</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">ind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">dim</span>
        <span class="n">inserts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">cb</span><span class="o">.</span><span class="n">view</span><span class="p">()</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ind</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">dims</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">inserts</span><span class="p">):</span>
            <span class="n">dims</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">insert_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">inserts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">inserts</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">inserts</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">inserts</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">inserts</span><span class="p">:</span>
            <span class="n">inserts</span> <span class="o">=</span> <span class="n">inserts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">update_selected</span><span class="p">(</span><span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">{</span><span class="n">dim</span><span class="p">:</span> <span class="n">inserts</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">check_arrays</span><span class="p">()</span></div>


<div class="viewcode-block" id="PlotCreator.insert_array">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.insert_array">[docs]</a>
    <span class="k">def</span> <span class="nf">insert_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inserts an array for the given variables (or the ones selected in</span>
<span class="sd">        the :attr:`variable_table` if `variables` is None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables_table</span><span class="o">.</span><span class="n">selected_variables</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">other_cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords_table</span><span class="o">.</span><span class="n">combo_boxes</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">other_cb</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
            <span class="n">dims</span><span class="p">[</span><span class="n">other_cb</span><span class="o">.</span><span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="n">ind</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">ind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">insert_array</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_table</span><span class="o">.</span><span class="n">check_arrays</span><span class="p">()</span></div>


<div class="viewcode-block" id="PlotCreator.get_ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.get_ds">[docs]</a>
    <span class="k">def</span> <span class="nf">get_ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the dataset</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        i: int or None</span>
<span class="sd">            If None, the dataset of the current index in the `ds_combo` is</span>
<span class="sd">            returned. Otherwise it specifies the locdation of the dictionary in</span>
<span class="sd">            the :attr:`ds_descs` attribute</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xarray.Dataset</span>
<span class="sd">            The requested dataset&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;ds&quot;</span><span class="p">]</span></div>


<div class="viewcode-block" id="PlotCreator.close">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to make sure that the data sets are deleted&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PlotCreator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;ds_descs&quot;</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span></div>


<div class="viewcode-block" id="PlotCreator.open_data">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.open_data">[docs]</a>
    <span class="k">def</span> <span class="nf">open_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience method to create a sub project without a plotter</span>

<span class="sd">        This method is used when the :attr:`pm_combo` is empty&quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">psy</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">from_dataset</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">main</span><span class="o">=</span><span class="n">psy</span><span class="o">.</span><span class="n">gcp</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">psy</span><span class="o">.</span><span class="n">scp</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>


<div class="viewcode-block" id="PlotCreator.switch2ds">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.switch2ds">[docs]</a>
    <span class="k">def</span> <span class="nf">switch2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Switch to the given dataset</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ds: xarray.Dataset</span>
<span class="sd">            The dataset to use. It is assumed that this dataset is already</span>
<span class="sd">            in the dataset combobox&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">desc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds_descs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">desc</span><span class="p">[</span><span class="s2">&quot;ds&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">ds</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ds_combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">return</span></div>


<div class="viewcode-block" id="PlotCreator.keyPressEvent">
<a class="viewcode-back" href="../../api/psyplot_gui.plot_creator.html#psyplot_gui.plot_creator.PlotCreator.keyPressEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reimplemented to close the window when escape is hitted&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">PlotCreator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <!--
SPDX-FileCopyrightText: 2021-2024 Helmholtz-Zentrum hereon GmbH

SPDX-License-Identifier: CC-BY-4.0
-->

<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024 Helmholtz-Zentrum hereon GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<div class="footer">
    <span class="creativecommons">
    <a href="https://creativecommons.org/licenses/by/4.0/" >
    <img style="height: 1.5em;" src="../../_static/license_logo.png" border="0" alt="Creative Commons License"/>
    </a>
    This documentation is licensed under
    <a href="https://creativecommons.org/licenses/by/4.0/">
    CC-BY-4.0
    </a>
    </span>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>