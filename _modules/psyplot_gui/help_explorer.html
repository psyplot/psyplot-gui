<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>psyplot_gui.help_explorer &mdash; psyplot-gui 1.3.0+8.gb3860f5 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> psyplot-gui
          </a>
              <div class="version">
                1.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration of the GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command line usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugin configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing to psyplot-gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/psyplot_gui.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../todos.html">ToDos</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">psyplot-gui</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Module code</a> &raquo;</li>
          <li><a href="../psyplot_gui.html">psyplot_gui</a> &raquo;</li>
      <li>psyplot_gui.help_explorer</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for psyplot_gui.help_explorer</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Help explorer widget supplying a simple web browser and a plain text help</span>
<span class="sd">viewer&quot;&quot;&quot;</span>

<span class="c1"># Disclaimer</span>
<span class="c1"># ----------</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2021 Helmholtz-Zentrum Hereon</span>
<span class="c1"># Copyright (C) 2020-2021 Helmholtz-Zentrum Geesthacht</span>
<span class="c1"># Copyright (C) 2016-2021 University of Lausanne</span>
<span class="c1">#</span>
<span class="c1"># This file is part of psyplot-gui and is released under the GNU LGPL-3.O license.</span>
<span class="c1"># See COPYING and COPYING.LESSER in the root of the repository for full</span>
<span class="c1"># licensing details.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License version 3.0 as</span>
<span class="c1"># published by the Free Software Foundation.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU LGPL-3.0 license for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU LGPL-3.0 license</span>
<span class="c1"># along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">osp</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">psyplot.docstring</span> <span class="kn">import</span> <span class="n">indent</span><span class="p">,</span> <span class="n">docstrings</span>
<span class="kn">from</span> <span class="nn">psyplot.compat.pycompat</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">psyplot.utils</span> <span class="kn">import</span> <span class="n">_temp_bool_prop</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.config.rcsetup</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.compat.qtcompat</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QWidget</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span> <span class="n">QFrame</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QWebEngineView</span><span class="p">,</span> <span class="n">QToolButton</span><span class="p">,</span>
    <span class="n">QIcon</span><span class="p">,</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QComboBox</span><span class="p">,</span> <span class="n">Qt</span><span class="p">,</span>  <span class="n">QSortFilterProxyModel</span><span class="p">,</span> <span class="n">isstring</span><span class="p">,</span> <span class="n">asstring</span><span class="p">,</span>
    <span class="n">QCompleter</span><span class="p">,</span> <span class="n">QStandardItemModel</span><span class="p">,</span> <span class="n">QPlainTextEdit</span><span class="p">,</span> <span class="n">QAction</span><span class="p">,</span> <span class="n">QMenu</span><span class="p">,</span> <span class="n">with_qt5</span><span class="p">,</span>
    <span class="n">QtGui</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.common</span> <span class="kn">import</span> <span class="n">get_icon</span><span class="p">,</span> <span class="n">DockMixin</span><span class="p">,</span> <span class="n">PyErrorMessage</span>
<span class="kn">from</span> <span class="nn">IPython.core.oinspect</span> <span class="kn">import</span> <span class="n">signature</span><span class="p">,</span> <span class="n">getdoc</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">psyplot_gui.common</span> <span class="kn">import</span> <span class="n">get_module_path</span><span class="p">,</span> <span class="n">StreamToLogger</span><span class="p">,</span> \
    <span class="n">is_running_tests</span>
<span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">mkdtemp</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">sphinx.application</span> <span class="kn">import</span> <span class="n">Sphinx</span>
    <span class="kn">from</span> <span class="nn">sphinx.pycode</span> <span class="kn">import</span> <span class="n">ModuleAnalyzer</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">psyplot.sphinxext.extended_napoleon</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">ExtendedNumpyDocstring</span> <span class="k">as</span> <span class="n">NumpyDocstring</span><span class="p">,</span>
            <span class="n">ExtendedGoogleDocstring</span> <span class="k">as</span> <span class="n">GoogleDocstring</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">sphinx.ext.napoleon</span> <span class="kn">import</span> <span class="n">NumpyDocstring</span><span class="p">,</span> <span class="n">GoogleDocstring</span>
    <span class="n">with_sphinx</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">with_sphinx</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">six</span><span class="o">.</span><span class="n">PY2</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pathlib</span>

    <span class="k">def</span> <span class="nf">file2html</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span><span class="o">.</span><span class="n">as_uri</span><span class="p">()</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>

<div class="viewcode-block" id="file2html"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.file2html">[docs]</a>    <span class="k">def</span> <span class="nf">file2html</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;file://&#39;</span> <span class="o">+</span> <span class="n">fname</span></div>


<div class="viewcode-block" id="html2file"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.html2file">[docs]</a><span class="k">def</span> <span class="nf">html2file</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">asstring</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="c1"># skip the first &#39;/&#39; on windows platform</span>
    <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">netloc</span><span class="p">,</span>
                                <span class="n">p</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">):]))</span></div>


<span class="n">_viewers</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="UrlCombo"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlCombo">[docs]</a><span class="k">class</span> <span class="nc">UrlCombo</span><span class="p">(</span><span class="n">QComboBox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A editable ComboBox with autocompletion&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlCombo</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setInsertPolicy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">InsertAtTop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">StrongFocus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEditable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completer</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># always show all completions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">setCompletionMode</span><span class="p">(</span><span class="n">QCompleter</span><span class="o">.</span><span class="n">UnfilteredPopupCompletion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pFilterModel</span> <span class="o">=</span> <span class="n">QSortFilterProxyModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pFilterModel</span><span class="o">.</span><span class="n">setFilterCaseSensitivity</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">CaseInsensitive</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">setPopup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">popup</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">textEdited</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pFilterModel</span><span class="o">.</span><span class="n">setFilterFixedString</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">activated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_text_on_top</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">QStandardItemModel</span><span class="p">())</span>

<div class="viewcode-block" id="UrlCombo.setModel"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlCombo.setModel">[docs]</a>    <span class="k">def</span> <span class="nf">setModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reimplemented to also set the model of the filter and completer&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlCombo</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pFilterModel</span><span class="o">.</span><span class="n">setSourceModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pFilterModel</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlCombo.add_text_on_top"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlCombo.add_text_on_top">[docs]</a>    <span class="k">def</span> <span class="nf">add_text_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the given text as the first item&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">block</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ind</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ind</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">block</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="c1"># replace keyPressEvent to always insert the selected item at the top</span>
<div class="viewcode-block" id="UrlCombo.keyPressEvent"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlCombo.keyPressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle key press events&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Return</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Key_Enter</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_text_on_top</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QComboBox</span><span class="o">.</span><span class="n">keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="UrlBrowser"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser">[docs]</a><span class="k">class</span> <span class="nc">UrlBrowser</span><span class="p">(</span><span class="n">QFrame</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Very simple browser with session history and autocompletion based upon</span>
<span class="sd">    the :class:`PyQt5.QtWebEngineWidgets.QWebEngineView` class</span>

<span class="sd">    Warnings</span>
<span class="sd">    --------</span>
<span class="sd">    This class is known to crash under PyQt4 when new web page domains are</span>
<span class="sd">    loaded. Hence it should be handled with care&quot;&quot;&quot;</span>

    <span class="n">completed</span> <span class="o">=</span> <span class="n">_temp_bool_prop</span><span class="p">(</span>
        <span class="s1">&#39;completed&#39;</span><span class="p">,</span> <span class="s2">&quot;Boolean whether the html page loading is completed.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">url_like_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^\w+://&#39;</span><span class="p">)</span>

    <span class="n">doc_urls</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
        <span class="p">(</span><span class="s1">&#39;startpage&#39;</span><span class="p">,</span> <span class="s1">&#39;https://startpage.com/&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;psyplot&#39;</span><span class="p">,</span> <span class="s1">&#39;http://psyplot.readthedocs.org/en/latest/&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;pyplot&#39;</span><span class="p">,</span> <span class="s1">&#39;http://matplotlib.org/api/pyplot_api.html&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;seaborn&#39;</span><span class="p">,</span> <span class="s1">&#39;http://stanford.edu/~mwaskom/software/seaborn/api.html&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cartopy&#39;</span><span class="p">,</span> <span class="s1">&#39;http://scitools.org.uk/cartopy/docs/latest/index.html&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;xarray&#39;</span><span class="p">,</span> <span class="s1">&#39;http://xarray.pydata.org/en/stable/&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;pandas&#39;</span><span class="p">,</span> <span class="s1">&#39;http://pandas.pydata.org/pandas-docs/stable/&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;numpy&#39;</span><span class="p">,</span> <span class="s1">&#39;https://docs.scipy.org/doc/numpy/reference/routines.html&#39;</span><span class="p">),</span>
        <span class="p">])</span>

    <span class="c1">#: The initial url showed in the webview. If None, nothing will be</span>
    <span class="c1">#: displayed</span>
    <span class="n">default_url</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: adress line</span>
    <span class="n">tb_url</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: button to go to previous url</span>
    <span class="n">bt_back</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: button to go to next url</span>
    <span class="n">bt_ahead</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: refresh the current url</span>
    <span class="n">bt_refresh</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: button to go lock to the current url</span>
    <span class="n">bt_lock</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: button to disable browsing in www</span>
    <span class="n">bt_url_lock</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: The upper part of the browser containing all the buttons</span>
    <span class="n">button_box</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: The upper most layout aranging the button box and the html widget</span>
    <span class="n">vbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: default value for :attr:`bt_lock`. Is set during browser</span>
    <span class="c1">#: initialization</span>
    <span class="n">bt_lock_default</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#: default value for :attr:`bt_url_lock`. Is set during browser</span>
    <span class="c1">#: initialization</span>
    <span class="n">bt_url_lock_default</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlBrowser</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ---------------------------- upper buttons --------------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># adress line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span> <span class="o">=</span> <span class="n">UrlCombo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># button to go to previous url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># button to go to next url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ahead</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># refresh the current url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_refresh</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># button to go lock to the current url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># button to disable browsing in www</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># ---------------------------- buttons settings -----------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s1">&#39;previous.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;Go back one page&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ahead</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s1">&#39;next.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;Go forward one page&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_refresh</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s1">&#39;refresh.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_refresh</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;Refresh the current page&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">with_qt5</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># We now that the browser can crash with Qt4, therefore we disable</span>
            <span class="c1"># the browing in the internet</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">rcParams</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_url_lock_from_rc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toogle_url_lock</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toogle_lock</span><span class="p">)</span>

        <span class="c1"># tooltip and icons of lock and url_lock are set in toogle_lock and</span>
        <span class="c1"># toogle_url_lock</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toogle_lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toogle_url_lock</span><span class="p">()</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># --------- initialization and connection of the web view -------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="c1">#: The actual widget showing the html content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="n">QWebEngineView</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">loadStarted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">loadFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">back</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_ahead</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">forward</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_refresh</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">reload</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">urlChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url_changed</span><span class="p">)</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># ---------------------------- layouts --------------------------------</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="c1"># The upper part of the browser containing all the buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span> <span class="o">=</span> <span class="n">button_box</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_back</span><span class="p">)</span>
        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_ahead</span><span class="p">)</span>
        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="p">)</span>
        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_refresh</span><span class="p">)</span>
        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="p">)</span>
        <span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="p">)</span>

        <span class="c1"># The upper most layout aranging the button box and the html widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">button_box</span><span class="p">)</span>

        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_url</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock_default</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock_default</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span>

<div class="viewcode-block" id="UrlBrowser.browse"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser.browse">[docs]</a>    <span class="k">def</span> <span class="nf">browse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a web browse on the given url and show the page on the Webview</span>
<span class="sd">        widget. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_like_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://&#39;</span> <span class="o">+</span> <span class="n">url</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Stopping current load...&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">completed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Loading </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
        <span class="c1"># we use :meth:`PyQt5.QtWebEngineWidgets.QWebEngineView.setUrl` instead</span>
        <span class="c1"># of :meth:`PyQt5.QtWebEngineWidgets.QWebEngineView.load` because that</span>
        <span class="c1"># changes the url directly and is more useful for unittests</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">setUrl</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QUrl</span><span class="p">(</span><span class="n">url</span><span class="p">))</span></div>

<div class="viewcode-block" id="UrlBrowser.url_changed"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser.url_changed">[docs]</a>    <span class="k">def</span> <span class="nf">url_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Triggered when the url is changed to update the adress line&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;url changed to </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="o">.</span><span class="n">setCurrentText</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>  <span class="c1"># Qt4</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="o">.</span><span class="n">setEditText</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tb_url</span><span class="o">.</span><span class="n">add_text_on_top</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlBrowser.update_url_lock_from_rc"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser.update_url_lock_from_rc">[docs]</a>    <span class="k">def</span> <span class="nf">update_url_lock_from_rc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">online</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">online</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">or</span>
                <span class="ow">not</span> <span class="n">online</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">click</span><span class="p">()</span></div>

<div class="viewcode-block" id="UrlBrowser.toogle_url_lock"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser.toogle_url_lock">[docs]</a>    <span class="k">def</span> <span class="nf">toogle_url_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable (or enable) the loading of web pages in www&quot;&quot;&quot;</span>
        <span class="n">bt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span>
        <span class="n">offline</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span>
            <span class="s1">&#39;world_red.png&#39;</span> <span class="k">if</span> <span class="n">offline</span> <span class="k">else</span> <span class="s1">&#39;world.png&#39;</span><span class="p">)))</span>
        <span class="n">online_message</span> <span class="o">=</span> <span class="s2">&quot;Go online&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">with_qt5</span><span class="p">:</span>
            <span class="n">online_message</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">WARNING: This mode is unstable under Qt4 &quot;</span>
                               <span class="s2">&quot;and might result in a complete program crash!&quot;</span><span class="p">)</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">online_message</span> <span class="k">if</span> <span class="n">offline</span> <span class="k">else</span> <span class="s2">&quot;Offline mode&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">offline</span><span class="p">:</span>
            <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">offline</span></div>

<div class="viewcode-block" id="UrlBrowser.toogle_lock"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlBrowser.toogle_lock">[docs]</a>    <span class="k">def</span> <span class="nf">toogle_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable (or enable) the changing of the current webpage&quot;&quot;&quot;</span>
        <span class="n">bt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span>
            <span class="s1">&#39;lock.png&#39;</span> <span class="k">if</span> <span class="n">bt</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;lock_open.png&#39;</span><span class="p">)))</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Unlock&quot;</span> <span class="k">if</span> <span class="n">bt</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;Lock to current page&quot;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="HelpMixin"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin">[docs]</a><span class="k">class</span> <span class="nc">HelpMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for providing help on an object&quot;&quot;&quot;</span>

    <span class="c1">#: Object containing the necessary fields to describe an object given to</span>
    <span class="c1">#: the help widget. The descriptor is set up by the :meth:`describe_object`</span>
    <span class="c1">#: method.</span>
    <span class="n">object_descriptor</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;ObjectDescriptor&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">])</span>

    <span class="c1">#: :class:`bool` determining whether the documentation of an object can be</span>
    <span class="c1">#: shown or not</span>
    <span class="n">can_document_object</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1">#: :class:`bool` determining whether this class can show restructured text</span>
    <span class="n">can_show_rst</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="HelpMixin.show_help"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.show_help">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;HelpMixin.show_help&#39;</span><span class="p">)</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the rst documentation for the given object</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj: object</span>
<span class="sd">            The object to get the documentation for</span>
<span class="sd">        oname: str</span>
<span class="sd">            The name to use for the object in the documentation</span>
<span class="sd">        files: list of str</span>
<span class="sd">            A path to additional files that shall be used to process the</span>
<span class="sd">            docs&quot;&quot;&quot;</span>
        <span class="n">descriptor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">describe_object</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_rst</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span></div>

<div class="viewcode-block" id="HelpMixin.header"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.header">[docs]</a>    <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Format the header and include object name and signature `sig`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The header for the documentation&quot;&quot;&quot;</span>
        <span class="n">bars</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">descriptor</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="n">sig</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bars</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="n">sig</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">bars</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="HelpMixin.describe_object"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.describe_object">[docs]</a>    <span class="k">def</span> <span class="nf">describe_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an instance of the :attr:`object_descriptor` class</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :attr:`object_descriptor`</span>
<span class="sd">            The descriptor containing the information on the object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_descriptor</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="p">)</span></div>

<div class="viewcode-block" id="HelpMixin.get_doc"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.get_doc">[docs]</a>    <span class="k">def</span> <span class="nf">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the documentation of the object in the given `descriptor`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        descriptor: instance of :attr:`object_descriptor`</span>
<span class="sd">            The descriptor containig the information on the specific object</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The header and documentation of the object in the descriptor</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method uses the :func:`IPython.core.oinspect.getdoc` function to</span>
<span class="sd">        get the documentation and the :func:`IPython.core.oinspect.signature`</span>
<span class="sd">        function to get the signature. Those function (different from the</span>
<span class="sd">        inspect module) do not fail when the object is not saved&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">obj</span>
        <span class="n">oname</span> <span class="o">=</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">name</span>
        <span class="n">sig</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">obj_sig</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="n">oname</span> <span class="o">=</span> <span class="n">oname</span> <span class="ow">or</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="n">obj_sig</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">six</span><span class="o">.</span><span class="n">PY2</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">InstanceType</span><span class="p">:</span>
                <span class="n">obj_sig</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">sig</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">obj_sig</span><span class="p">))</span>
                <span class="n">sig</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;^\(\s*self,\s*&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">sig</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Failed to get signature from </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">),</span>
                             <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">oname</span> <span class="o">=</span> <span class="n">oname</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">oname</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">sig</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ds</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">):</span>
            <span class="n">init_ds</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">init_ds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">init_ds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">):</span>
            <span class="n">call_ds</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="fm">__call__</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">call_ds</span> <span class="ow">and</span> <span class="n">call_ds</span> <span class="o">!=</span> <span class="n">getdoc</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__call__</span><span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">call_ds</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_docstring</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">head</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">doc</span></div>

<div class="viewcode-block" id="HelpMixin.process_docstring"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.process_docstring">[docs]</a>    <span class="k">def</span> <span class="nf">process_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make final modification on the rst lines</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The docstring&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>

<div class="viewcode-block" id="HelpMixin.show_rst"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.show_rst">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;HelpMixin.show_rst&#39;</span><span class="p">)</span>
    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_rst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract method which needs to be implemented by th widget to show</span>
<span class="sd">        restructured text</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        text: str</span>
<span class="sd">            The text to show</span>
<span class="sd">        oname: str</span>
<span class="sd">            The object name</span>
<span class="sd">        descriptor: instance of :attr:`object_descriptor`</span>
<span class="sd">            The object descriptor holding the informations</span>
<span class="sd">        files: list of str</span>
<span class="sd">            A path to additional files that shall be used to display the docs</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if the text is displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="HelpMixin.show_intro"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpMixin.show_intro">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="s1">&#39;HelpMixin.show_intro&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">show_intro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show an intro message</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            A string in reStructured Text format to show&quot;&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Welcome to psyplot!&#39;</span>
        <span class="n">title</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_rst</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="n">text</span><span class="p">,</span> <span class="s1">&#39;intro&#39;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TextHelp"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.TextHelp">[docs]</a><span class="k">class</span> <span class="nc">TextHelp</span><span class="p">(</span><span class="n">QFrame</span><span class="p">,</span> <span class="n">HelpMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class to show plain text rst docstrings&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TextHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1">#: The :class:`PyQt5.QtWidgets.QPlainTextEdit` instance used for</span>
        <span class="c1">#: displaying the documentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editor</span> <span class="o">=</span> <span class="n">QPlainTextEdit</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editor</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Courier New&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="p">)</span>

<div class="viewcode-block" id="TextHelp.show_rst"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.TextHelp.show_rst">[docs]</a>    <span class="k">def</span> <span class="nf">show_rst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show the given text in the editor window</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        text: str</span>
<span class="sd">            The text to show</span>
<span class="sd">        ``*args,**kwargs``</span>
<span class="sd">            Are ignored&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editor</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editor</span><span class="o">.</span><span class="n">insertPlainText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div></div>


<div class="viewcode-block" id="UrlHelp"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp">[docs]</a><span class="k">class</span> <span class="nc">UrlHelp</span><span class="p">(</span><span class="n">UrlBrowser</span><span class="p">,</span> <span class="n">HelpMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class to convert rst docstrings to html and show browsers&quot;&quot;&quot;</span>

    <span class="c1">#: Object containing the necessary fields to describe an object given to</span>
    <span class="c1">#: the help widget. The descriptor is set up by the :meth:`describe_object`</span>
    <span class="c1">#: method and contains an additional objtype attribute</span>
    <span class="n">object_descriptor</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span>
        <span class="s1">&#39;ObjectDescriptor&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;objtype&#39;</span><span class="p">])</span>

    <span class="n">can_document_object</span> <span class="o">=</span> <span class="n">with_sphinx</span>
    <span class="n">can_show_rst</span> <span class="o">=</span> <span class="n">with_sphinx</span>

    <span class="c1">#: menu button with different urls</span>
    <span class="n">bt_url_menus</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">#:</span>
    <span class="n">sphinx_thread</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp_dir</span> <span class="o">=</span> <span class="s1">&#39;sphinx_dir&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;sphinx_dir&#39;</span><span class="p">,</span> <span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;psyplot_&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span> <span class="o">=</span> <span class="n">PyErrorMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">with_sphinx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span> <span class="o">=</span> <span class="n">SphinxThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">html_ready</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">html_error</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span><span class="o">.</span><span class="n">showTraceback</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">html_error</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
            <span class="n">rcParams</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;help_explorer.render_docs_parallel&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">reset_sphinx</span><span class="p">)</span>
            <span class="n">rcParams</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;help_explorer.use_intersphinx&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">reset_sphinx</span><span class="p">)</span>
            <span class="n">rcParams</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;help_explorer.online&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">reset_sphinx</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;console.connect_to_help&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span>
                <span class="s1">&#39;ipython_console.png&#39;</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span>
                <span class="s1">&#39;ipython_console_t.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toogle_connect_console</span><span class="p">)</span>
        <span class="n">rcParams</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;console.connect_to_help&#39;</span><span class="p">,</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">update_connect_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toogle_connect_console</span><span class="p">()</span>

        <span class="c1"># menu button with different urls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span> <span class="o">=</span> <span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span><span class="s1">&#39;docu_button.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;Browse documentations&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="o">.</span><span class="n">setPopupMode</span><span class="p">(</span><span class="n">QToolButton</span><span class="o">.</span><span class="n">InstantPopup</span><span class="p">)</span>

        <span class="n">docu_menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc_urls</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">to_url</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">to_url</span><span class="p">)</span>
            <span class="n">docu_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="n">docu_menu</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_box</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="p">)</span>
        <span class="c1"># toogle the lock again to set the bt_url_menus enabled state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toogle_url_lock</span><span class="p">()</span>

<div class="viewcode-block" id="UrlHelp.update_connect_console"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.update_connect_console">[docs]</a>    <span class="k">def</span> <span class="nf">update_connect_console</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connect</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">connect</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">or</span>
                <span class="ow">not</span> <span class="n">connect</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span><span class="o">.</span><span class="n">click</span><span class="p">()</span></div>

<div class="viewcode-block" id="UrlHelp.toogle_connect_console"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.toogle_connect_console">[docs]</a>    <span class="k">def</span> <span class="nf">toogle_connect_console</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable (or enable) the loading of web pages in www&quot;&quot;&quot;</span>
        <span class="n">bt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_connect_console</span>
        <span class="n">connect</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">get_icon</span><span class="p">(</span>
            <span class="s1">&#39;ipython_console.png&#39;</span> <span class="k">if</span> <span class="n">connect</span> <span class="k">else</span> <span class="s1">&#39;ipython_console_t.png&#39;</span><span class="p">)))</span>
        <span class="n">bt</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">onnect the console to the help explorer&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="s2">&quot;Don&#39;t c&quot;</span> <span class="k">if</span> <span class="n">connect</span> <span class="k">else</span> <span class="s2">&quot;C&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;console.connect_to_help&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">connect</span><span class="p">:</span>
            <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;console.connect_to_help&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">connect</span></div>

<div class="viewcode-block" id="UrlHelp.reset_sphinx"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.reset_sphinx">[docs]</a>    <span class="k">def</span> <span class="nf">reset_sphinx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method that is called if the configuration changes&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">with_sphinx</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">app</span></div>

<div class="viewcode-block" id="UrlHelp.show_help"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.show_help">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render the rst docu for the given object with sphinx and show it</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_help.parameters)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">show_help</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="n">oname</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlHelp.show_intro"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.show_intro">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_intro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the intro text in the explorer</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_intro.parameters)s&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">index_file</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                        <span class="s1">&#39;Table of Contents</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="s1">&#39;=================</span><span class="se">\n\n</span><span class="s1">.. toctree::</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlHelp.show_rst"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.show_rst">[docs]</a>    <span class="k">def</span> <span class="nf">show_rst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">descriptor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Render restructured text with sphinx and show it</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_rst.parameters)s&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">oname</span> <span class="ow">and</span> <span class="n">descriptor</span><span class="p">:</span>
            <span class="n">oname</span> <span class="o">=</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">name</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="ow">or</span> <span class="p">[]:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span><span class="p">,</span> <span class="n">osp</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="UrlHelp.describe_object"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.describe_object">[docs]</a>    <span class="k">def</span> <span class="nf">describe_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Describe an object using additionaly the object type from the</span>
<span class="sd">        :meth:`get_objtype` method</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        instance of :attr:`object_descriptor`</span>
<span class="sd">            The descriptor of the object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_descriptor</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objtype</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span></div>

<div class="viewcode-block" id="UrlHelp.browse"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.browse">[docs]</a>    <span class="k">def</span> <span class="nf">browse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reimplemented to add file paths to the url string&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">html_file</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">url</span> <span class="o">+</span> <span class="s1">&#39;.html&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">html_file</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">file2html</span><span class="p">(</span><span class="n">html_file</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlHelp.toogle_url_lock"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.toogle_url_lock">[docs]</a>    <span class="k">def</span> <span class="nf">toogle_url_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable (or enable) the loading of web pages in www&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">toogle_url_lock</span><span class="p">()</span>
        <span class="c1"># enable or disable documentation button</span>
        <span class="n">bt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span>
        <span class="n">offline</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_menus</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="ow">not</span> <span class="n">offline</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>  <span class="c1"># not yet initialized</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="UrlHelp.url_changed"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.url_changed">[docs]</a>    <span class="k">def</span> <span class="nf">url_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reimplemented to remove file paths from the url string&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;file://&#39;</span><span class="p">):</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="n">html2file</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">osp</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span> <span class="n">osp</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">([</span>
                    <span class="n">fname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">])):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">fname</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">url_changed</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>

<div class="viewcode-block" id="UrlHelp.header"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.header">[docs]</a>    <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%(name)s</span><span class="se">\n</span><span class="si">%(bars)s</span><span class="se">\n\n</span><span class="s1">.. py:</span><span class="si">%(type)s</span><span class="s1">:: </span><span class="si">%(name)s%(sig)s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;bars&#39;</span><span class="p">:</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">descriptor</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="s1">&#39;sig&#39;</span><span class="p">:</span> <span class="n">sig</span><span class="p">}</span></div>

<div class="viewcode-block" id="UrlHelp.get_objtype"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.get_objtype">[docs]</a>    <span class="k">def</span> <span class="nf">get_objtype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the object type of the given object and determine wheter the</span>
<span class="sd">        object is considered a class, a module, a function, method or data</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj: object</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            One out of {&#39;class&#39;, &#39;module&#39;, &#39;function&#39;, &#39;method&#39;, &#39;data&#39;}&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;class&#39;</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;module&#39;</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="nb">all</span><span class="p">)):</span>
            <span class="k">return</span> <span class="s1">&#39;function&#39;</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">)):</span>
            <span class="k">return</span> <span class="s1">&#39;method&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;data&#39;</span></div>

<div class="viewcode-block" id="UrlHelp.is_importable"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.is_importable">[docs]</a>    <span class="k">def</span> <span class="nf">is_importable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine whether members of the given module can be documented with</span>
<span class="sd">        sphinx by using the :func:`sphinx.util.get_module_source` function</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        modname: str</span>
<span class="sd">            The __name__ attribute of the module to import</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if sphinx can import the module&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ModuleAnalyzer</span><span class="o">.</span><span class="n">get_module_source</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="UrlHelp.get_doc"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.get_doc">[docs]</a>    <span class="k">def</span> <span class="nf">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reimplemented to (potentially) use the features from</span>
<span class="sd">        sphinx.ext.autodoc&quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;__.*__&#39;</span><span class="p">,</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="ow">or</span>
                                   <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_importable</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)):</span>
            <span class="n">module</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">isclass</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="c1"># If the module is available, we try to use autodoc</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;.. currentmodule:: &#39;</span> <span class="o">+</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
            <span class="c1"># a module --&gt; use automodule</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismodule</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="s1">&#39;.. automodule:: &#39;</span> <span class="o">+</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="c1"># an importable class --&gt; use autoclass</span>
            <span class="k">elif</span> <span class="n">isclass</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">descriptor</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="s1">&#39;.. autoclass:: &#39;</span> <span class="o">+</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="c1"># an instance and the class can be imported</span>
            <span class="c1"># --&gt; use super get_doc and autoclass for the tyoe</span>
            <span class="k">elif</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span>
                    <span class="n">module</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                    <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">),</span>
                    <span class="s2">&quot;Class docstring</span><span class="se">\n</span><span class="s2">===============&quot;</span><span class="p">,</span>
                    <span class="s1">&#39;.. autoclass:: &#39;</span> <span class="o">+</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">])</span>
            <span class="c1"># an instance --&gt; use super get_doc for instance and the type</span>
            <span class="k">elif</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
                <span class="n">cls_doc</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">describe_object</span><span class="p">(</span>
                    <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                    <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">),</span>
                    <span class="s2">&quot;Class docstring</span><span class="se">\n</span><span class="s2">===============&quot;</span><span class="p">,</span>
                    <span class="n">cls_doc</span><span class="p">])</span>
            <span class="c1"># a function or method --&gt; use super get_doc</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">+=</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span>
        <span class="c1"># otherwise the object has been defined in this session</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># an instance --&gt; use super get_doc for instance and the type</span>
            <span class="k">if</span> <span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
                <span class="n">cls_doc</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">describe_object</span><span class="p">(</span>
                    <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
                    <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">),</span>
                    <span class="s2">&quot;Class docstring</span><span class="se">\n</span><span class="s2">===============&quot;</span><span class="p">,</span>
                    <span class="n">cls_doc</span><span class="p">])</span>
            <span class="c1"># a function or method --&gt; use super get_doc</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">descriptor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">doc</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="UrlHelp.process_docstring"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.process_docstring">[docs]</a>    <span class="k">def</span> <span class="nf">process_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Process the lines with the napoleon sphinx extension&quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)))</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">NumpyDocstring</span><span class="p">(</span>
            <span class="n">lines</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">obj</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">lines</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">GoogleDocstring</span><span class="p">(</span>
            <span class="n">lines</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">obj</span><span class="o">=</span><span class="n">descriptor</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">lines</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">indent</span><span class="p">(</span><span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">process_docstring</span><span class="p">(</span>
            <span class="n">lines</span><span class="p">,</span> <span class="n">descriptor</span><span class="p">))</span></div>

<div class="viewcode-block" id="UrlHelp.close"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.UrlHelp.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;force&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">is_running_tests</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span><span class="o">.</span><span class="n">app</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temp_dir</span><span class="p">:</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sphinx_dir</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphinx_thread</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">is_running_tests</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_url_lock_default</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bt_lock</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_lock_default</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UrlHelp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SphinxThread"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.SphinxThread">[docs]</a><span class="k">class</span> <span class="nc">SphinxThread</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QThread</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A thread to render sphinx documentation in a separate process&quot;&quot;&quot;</span>

    <span class="c1">#: A signal to be emitted when the rendering finished. The url is the</span>
    <span class="c1">#: file location</span>
    <span class="n">html_ready</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">html_error</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outdir</span><span class="p">,</span> <span class="n">html_text_no_doc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SphinxThread</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html_text_no_doc</span> <span class="o">=</span> <span class="n">html_text_no_doc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdir</span> <span class="o">=</span> <span class="n">outdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_file</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;psyplot.rst&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confdir</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_module_path</span><span class="p">(</span><span class="vm">__name__</span><span class="p">),</span> <span class="s1">&#39;sphinx_supp&#39;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confdir</span><span class="p">,</span> <span class="s1">&#39;psyplot.rst&#39;</span><span class="p">),</span>
                        <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;psyplot.rst&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="SphinxThread.render"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.SphinxThread.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Render the given rst string and save the file as ``name + &#39;.rst&#39;``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        doc: str</span>
<span class="sd">            The rst docstring</span>
<span class="sd">        name: str</span>
<span class="sd">            the name to use for the file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="c1"># start rendering in separate process</span>
            <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.render_docs_parallel&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>

<div class="viewcode-block" id="SphinxThread.run"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.SphinxThread.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the html file. When called the first time, it may take a</span>
<span class="sd">        while because the :class:`sphinx.application.Sphinx` app is build,</span>
<span class="sd">        potentially with intersphinx</span>

<span class="sd">        When finished, the html_ready signal is emitted&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;app&#39;</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">IPython.core.history</span> <span class="kn">import</span> <span class="n">HistoryAccessor</span>
            <span class="c1"># to avoid history access conflicts between different threads,</span>
            <span class="c1"># we disable the ipython history</span>
            <span class="n">HistoryAccessor</span><span class="o">.</span><span class="n">enabled</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Sphinx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">confdir</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span>
                              <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;doctrees&#39;</span><span class="p">),</span>
                              <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                              <span class="n">status</span><span class="o">=</span><span class="n">StreamToLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">),</span>
                              <span class="n">warning</span><span class="o">=</span><span class="n">StreamToLogger</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">docfile</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.rst&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">docfile</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+=</span> <span class="s1">&#39;1&#39;</span>
                <span class="n">docfile</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
                    <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.rst&#39;</span><span class="p">))</span>
            <span class="n">html_file</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.html&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">docfile</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index_file</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">    &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">docfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html_file</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="s1">&#39;_build&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;psyplot.html&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Error while building sphinx document </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html_error</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;&#39;</span> <span class="o">+</span> <span class="n">msg</span> <span class="o">+</span> <span class="s1">&#39;&lt;/b&gt;&#39;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html_ready</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">file2html</span><span class="p">(</span><span class="n">html_file</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="HelpExplorer"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer">[docs]</a><span class="k">class</span> <span class="nc">HelpExplorer</span><span class="p">(</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">DockMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A widget for showing the documentation. It behaves somewhat similar</span>
<span class="sd">    to spyders object inspector plugin and can show restructured text either</span>
<span class="sd">    as html (if sphinx is installed) or as plain text. It furthermore has a</span>
<span class="sd">    browser to show html content</span>

<span class="sd">    Warnings</span>
<span class="sd">    --------</span>
<span class="sd">    The :class:`HelpBrowser` class is known to crash under PyQt4 when new web</span>
<span class="sd">    page domains are loaded. Hence you should disable the browsing to different</span>
<span class="sd">    remote websites and even disable intersphinx&quot;&quot;&quot;</span>

    <span class="c1">#: The viewer classes used by the help explorer. :class:`HelpExplorer`</span>
    <span class="c1">#: instances replace this attribute with the corresponding HelpMixin</span>
    <span class="c1">#: instance</span>
    <span class="n">viewers</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;HTML help&#39;</span><span class="p">,</span> <span class="n">UrlHelp</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Plain text&#39;</span><span class="p">,</span> <span class="n">TextHelp</span><span class="p">)])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;help_explorer.use_webengineview&#39;</span><span class="p">]:</span>
        <span class="k">del</span> <span class="n">viewers</span><span class="p">[</span><span class="s1">&#39;HTML help&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">HelpExplorer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="n">vbox</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_viewers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span> <span class="o">=</span> <span class="n">_viewers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">w</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">key</span><span class="p">,</span> <span class="bp">cls</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">)])</span>
            <span class="c1"># save the UrlHelp because QWebEngineView creates child processes</span>
            <span class="c1"># that are not properly closed by PyQt and as such use too much</span>
            <span class="c1"># memory</span>
            <span class="k">if</span> <span class="n">is_running_tests</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">_viewers</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">ini</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">ini</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="n">vbox</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">ini</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_viewer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vbox</span><span class="p">)</span>

<div class="viewcode-block" id="HelpExplorer.set_viewer"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer.set_viewer">[docs]</a>    <span class="k">def</span> <span class="nf">set_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the current documentation viewer</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str or object</span>
<span class="sd">            A string must be one of the :attr:`viewers` attribute. An object</span>
<span class="sd">            can be one of the values in the :attr:`viewers` attribute&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span> <span class="n">asstring</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Don&#39;t have a viewer named </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">))</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">viewer</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">viewer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="n">viewer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isstring</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="HelpExplorer.show_help"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer.show_help">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the documentaion of the given object</span>

<span class="sd">        We first try to use the current viewer based upon it&#39;s</span>
<span class="sd">        :attr:`HelpMixin.can_document_object` attribute. If this does not work,</span>
<span class="sd">        we check the other viewers</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_help.parameters)s&quot;&quot;&quot;</span>
        <span class="n">oname</span> <span class="o">=</span> <span class="n">asstring</span><span class="p">(</span><span class="n">oname</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">can_document_object</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">show_help</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="n">oname</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Could not document </span><span class="si">%s</span><span class="s2"> with </span><span class="si">%s</span><span class="s2"> viewer!&quot;</span><span class="p">,</span>
                             <span class="n">oname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">(),</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">curr_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">viewername</span><span class="p">,</span> <span class="n">viewer</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
                    <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">curr_i</span> <span class="ow">and</span> <span class="n">viewer</span><span class="o">.</span><span class="n">can_document_object</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_viewer</span><span class="p">(</span><span class="n">viewername</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">combo</span><span class="o">.</span><span class="n">blockSignals</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ret</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">show_help</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="n">oname</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Could not document </span><span class="si">%s</span><span class="s2"> with </span><span class="si">%s</span><span class="s2"> viewer!&quot;</span><span class="p">,</span>
                                     <span class="n">oname</span><span class="p">,</span> <span class="n">viewername</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="HelpExplorer.show_rst"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer.show_rst">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_rst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show restructured text</span>

<span class="sd">        We first try to use the current viewer based upon it&#39;s</span>
<span class="sd">        :attr:`HelpMixin.can_show_rst` attribute. If this does not work,</span>
<span class="sd">        we check the other viewers</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_rst.parameters)s&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">can_show_rst</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">show_rst</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="n">oname</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">viewer</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">viewer</span><span class="o">.</span><span class="n">can_show_rst</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_viewer</span><span class="p">(</span><span class="n">viewer</span><span class="p">)</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">show_rst</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">oname</span><span class="o">=</span><span class="n">oname</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="HelpExplorer.show_intro"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer.show_intro">[docs]</a>    <span class="nd">@docstrings</span><span class="o">.</span><span class="n">dedent</span>
    <span class="k">def</span> <span class="nf">show_intro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show an intro text</span>

<span class="sd">        We first try to use the current viewer based upon it&#39;s</span>
<span class="sd">        :attr:`HelpMixin.can_show_rst` attribute. If this does not work,</span>
<span class="sd">        we check the other viewers</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        %(HelpMixin.show_intro.parameters)s&quot;&quot;&quot;</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">viewer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">)):</span>
            <span class="n">viewer</span><span class="o">.</span><span class="n">show_intro</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="n">viewer</span><span class="o">.</span><span class="n">can_show_rst</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_viewer</span><span class="p">(</span><span class="n">viewer</span><span class="p">)</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="HelpExplorer.close"><a class="viewcode-back" href="../../api/psyplot_gui.help_explorer.html#psyplot_gui.help_explorer.HelpExplorer.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewers</span><span class="p">[</span><span class="s1">&#39;HTML help&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">HelpExplorer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright 2016 - 2020, Philipp S. Sommer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>